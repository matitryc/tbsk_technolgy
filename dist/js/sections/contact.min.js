"use strict";emailjs.init("Hhpvi3dgfNV-eaXKW");var btn=document.querySelector(".buttoners"),cross=document.querySelector(".cross"),formBox=document.querySelector(".form-box"),notifications=document.querySelector(".notifications"),notificationMessages={cooldown:'Błąd podczas wysyłania maila.<br>Osiągnięto limit maili wynoszący: <span class="highlight">3</span>.<br>Spróbuj 24h po wysłaniu ostatniego maila.',error:"Błąd podczas wysyłania maila.<br>Spróbuj ponownie później.",success:' E-mail pomyślnie wysłano.<br>Liczba maili możliwych do wysłania<br>w ciągu następnych 24h: <span class="highlight"></span>.'},opennedForm=formBox.querySelector(".open-form-inner"),form=document.querySelector(".contact form"),formTelephoneControls=document.querySelectorAll(".form-controls"),numbers="0123456789",disableScroll=function(){var e=window.scrollY;window.onscroll=function(){window.scrollTo({top:e,behavior:"instant"})}},handleArrowRight=function(e){e=e.nextElementSibling;e&&e.focus()},handleArrowLeft=function(e){e=e.previousElementSibling;e&&e.focus()},handleInput=function(e,o){"Backspace"==e?""==o.value?handleArrowLeft(o):o.value="":""!=o.value&&handleArrowRight(o)},enableScroll=function(){window.onscroll=function(){}},closeFormIfOutside=function(e){opennedForm.contains(e.target)||e.target==btn||(formBox.classList.add("hidden"),enableScroll())},createNotification=function(e,o){var t=document.createElement("div"),e=(t.setAttribute("data-success",e),document.createElement("p"));e.innerHTML=o,t.append(e),o==notificationMessages.success&&(o=document.cookie.split(";").find(function(e){return e.trim().startsWith("limit")}).split("=")[1],e.querySelector(".highlight").append(o)),t.classList.add("notification"),notifications.append(t),setTimeout(function(){t.classList.add("shown"),setTimeout(function(){t.classList.remove("shown"),setTimeout(function(){t.remove()},500)},5e3)},100)};btn.addEventListener("click",function(){disableScroll(),formBox.classList.remove("hidden")}),cross.addEventListener("click",function(){enableScroll(),formBox.classList.add("hidden")}),formTelephoneControls.forEach(function(o){o.addEventListener("keydown",function(e){"ArrowRight"==e.key?handleArrowRight(o):"ArrowLeft"==e.key?handleArrowLeft(o):handleInput(e.key,o)}),o.addEventListener("input",function(e){numbers.includes(e.target.value)||(e.target.value="")})}),form.addEventListener("submit",function(e){e.preventDefault();var t,e=document.cookie.split(";");e.find(function(e){return e.trim().startsWith("emailCooldown")})||(e=e.find(function(e){return e.trim().startsWith("limit")}),3<=(t=e?+e.split("=")[1]:0)?((e=new Date).setTime(e.getTime()+72e5),document.cookie="emailCooldown = emailCooldown; expires =  ".concat(e),document.cookie="limit=3; expires = ".concat(e),createNotification("false",notificationMessages.cooldown)):emailjs.sendForm("service_pk7b8o3","template_ykytfdk",form).then(function(){formBox.classList.add("hidden"),enableScroll();var e=form.querySelectorAll("input"),o=form.querySelector("textarea");e.forEach(function(e){e.value=""}),o.value="",e=++t,(o=new Date).setTime(o.getTime()+864e5),document.cookie="limit=".concat(e,"; expires = ").concat(o),createNotification("true",notificationMessages.success)}).catch(function(){createNotification("false",notificationMessages.error)}))}),window.addEventListener("click",function(e){return closeFormIfOutside(e)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlY3Rpb25zL2NvbnRhY3QuanMiXSwibmFtZXMiOlsiZW1haWxqcyIsImluaXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJidG4iLCJjcm9zcyIsImZvcm1Cb3giLCJub3RpZmljYXRpb25zIiwiY29vbGRvd24iLCJub3RpZmljYXRpb25NZXNzYWdlcyIsImVycm9yIiwib3Blbm5lZEZvcm0iLCJmb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsIm51bWJlcnMiLCJkaXNhYmxlU2Nyb2xsIiwic2Nyb2xsVG9wIiwid2luZG93Iiwic2Nyb2xsWSIsIm9uc2Nyb2xsIiwic2Nyb2xsVG8iLCJ0b3AiLCJiZWhhdmlvciIsIm5leHRDb250cm9sIiwiY29udHJvbCIsIm5leHRFbGVtZW50U2libGluZyIsImZvY3VzIiwicHJldkNvbnRyb2wiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiaGFuZGxlQXJyb3dMZWZ0Iiwia2V5IiwidmFsdWUiLCJoYW5kbGVBcnJvd1JpZ2h0IiwiZW5hYmxlU2Nyb2xsIiwibm90aWZpY2F0aW9uIiwic2V0QXR0cmlidXRlIiwiZSIsInRhcmdldCIsImlzU3VjY2VzcyIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJtZXNzYWdlIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwiY29va2llcyIsInRyaW0iLCJzdGFydHNXaXRoIiwibGltaXRWYWx1ZSIsImxpbWl0Q29va2llIiwic3BsaXQiLCJwIiwiaGlnaGxpZ2h0U3BhbiIsImFwcGVuZCIsInN1Y2Nlc3MiLCJjbGFzc0xpc3QiLCJjb29raWUiLCJhZGQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZvcm1UZWxlcGhvbmVDb250cm9scyIsImRheSIsImRhdGUiLCJpbmNsdWRlcyIsInNldFRpbWUiLCJnZXRUaW1lIiwiZmluZCIsInByZXZlbnREZWZhdWx0IiwiY29udGFjdEZvcm1JZCIsIkRhdGUiLCJjb250YWN0U2VydmljZUlkIiwic2VuZEZvcm0iLCJ0ZXh0YXJlYSIsInRoZW4iLCJzZXRTZW5kTGltaXQiLCJpbnB1dHMiLCJmb3JFYWNoIiwiaW5wdXQiLCJjbG9zZUZvcm1JZk91dHNpZGUiLCJjb29sZG93bkNvb2tpZSIsImNvbmNhdCJdLCJtYXBwaW5ncyI6ImFBQ0FBLFFBQVFDLEtBQUssbUJBQW1CLEVBQWhDRCxJQUFBQSxJQUFZRSxTQUFDQyxjQUFvQixZQUFBLEVBRTNCQyxNQUFNRixTQUFTQyxjQUFjLFFBQVksRUFDekNFLFFBQVFILFNBQVNDLGNBQWMsV0FBUyxFQUN4Q0csY0FBa0JKLFNBQUNDLGNBQWMsZ0JBQVksRUFDN0NJLHFCQUF5QkosQ0FDL0JLLFNBQU1DLG9KQUNKRCxNQUFBQSw2REFDQUUsUUFBTyw4SEFFVCxFQUFDQyxZQUFBTCxRQUFBSCxjQUFBLGtCQUFBLEVBQ0tRLEtBQUFBLFNBQWNMLGNBQVFILGVBQWMsRUFDcENTLHNCQUFnQlQsU0FBY1UsaUJBQWdCLGdCQUFBLEVBRzlDQyxRQUFVLGFBQ1ZDLGNBQWdCLFdBQ3BCLElBQU1DLEVBQVlDLE9BQU9DLFFBQ3pCRCxPQUFPRSxTQUFXLFdBQ2hCRixPQUFPRyxTQUFTLENBQ2RDLElBQUtMLEVBQ0xNLFNBQVUsU0FDWixDQUFDLENBQ0gsQ0FDRixFQUdRQyxpQkFBY0MsU0FBQUEsR0FDakJELEVBQVlDLEVBQUFDLG1CQUNiRixHQUNGQSxFQUFBRyxNQUFBLENBR0YsRUFFS0MsZ0JBQVksU0FBQUgsR0FDYkcsRUFBa0JILEVBQUNJLHVCQUNyQkQsR0FDREEsRUFBQUQsTUFBQSxDQUFELEVBS01HLFlBQUFBLFNBQWVDLEVBQUNOLEdBRWIsYUFESk0sRUFFbUIsSUFBbEJOLEVBQVFPLE1BQ1ZGLGdCQUFBTCxDQUFBLEVBSUVRLEVBQUFBLE1BQWdCLEdBS0QsSUFBZkMsRUFBQUEsT0FDSmhCLGlCQUFrQk8sQ0FBQSxDQUhwQixFQVNJUyxhQUFjLFdBQ2hCaEIsT0FBQUUsU0FBQSxZQUNGLEVBR1FlLG1CQUFlaEMsU0FBQUEsR0FDckJnQyxZQUFhQyxTQUFZQyxFQUFD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QUEsRUFDQSxDQUFBLEVBRUsyQixFQUFBQSxNQUFpQixHQTFDa0UzQixFQTBDbEQ4QyxFQUFBQSxHQXhDaEM5QixFQUFBQSxJQUFXcUIsTUFBc0JMLFFBQUlULEVBQU9WLFFBQU9DLEVBRHJEaUMsS0FDK0QsRUFBUzVFLFNBQUNvRCxPQUFBLFNBQUF5QixPQUFBaEQsRUFBQSxjQUFBLEVBQUFnRCxPQUFBbEIsQ0FBQSxFQXdDakJuQixtQkFBQSxPQUFBakMscUJBQUEyQyxPQUFBLENBUnhELENBQUMsRUFBQyxNQUNLLFdBQ0xWLG1CQUFtQixRQUFTakMscUJBQXFCQyxLQUFLLENBQ3hELENBQUMsRUFHUCxDQUFDLEVBRURPLE9BQU95QyxpQkFBaUIsUUFBUyxTQUFDdEIsR0FBQyxPQUFLeUMsbUJBQW1CekMsQ0FBQyxDQUFDLENBQUEiLCJmaWxlIjoic2VjdGlvbnMvY29udGFjdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbmVtYWlsanMuaW5pdCgnSGhwdmkzZGdmTlYtZWFYS1cnKVxuXG5jb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uZXJzJylcbmNvbnN0IGNyb3NzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyb3NzJylcbmNvbnN0IGZvcm1Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1ib3gnKVxuY29uc3Qgbm90aWZpY2F0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RpZmljYXRpb25zJylcbmNvbnN0IG5vdGlmaWNhdGlvbk1lc3NhZ2VzID0ge1xuICBjb29sZG93bjogJ0LFgsSFZCBwb2RjemFzIHd5c3nFgmFuaWEgbWFpbGEuPGJyPk9zacSFZ25pxJl0byBsaW1pdCBtYWlsaSB3eW5vc3rEhWN5OiA8c3BhbiBjbGFzcz1cImhpZ2hsaWdodFwiPjM8L3NwYW4+Ljxicj5TcHLDs2J1aiAyNGggcG8gd3lzxYJhbml1IG9zdGF0bmllZ28gbWFpbGEuJyxcbiAgZXJyb3I6ICdCxYLEhWQgcG9kY3phcyB3eXN5xYJhbmlhIG1haWxhLjxicj5TcHLDs2J1aiBwb25vd25pZSBww7PFum5pZWouJyxcbiAgc3VjY2VzczogJyBFLW1haWwgcG9tecWbbG5pZSB3eXPFgmFuby48YnI+TGljemJhIG1haWxpIG1vxbxsaXd5Y2ggZG8gd3lzxYJhbmlhPGJyPncgY2nEhWd1IG5hc3TEmXBueWNoIDI0aDogPHNwYW4gY2xhc3M9XCJoaWdobGlnaHRcIj48L3NwYW4+Lidcbn1cbmNvbnN0IG9wZW5uZWRGb3JtID0gZm9ybUJveC5xdWVyeVNlbGVjdG9yKCcub3Blbi1mb3JtLWlubmVyJylcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdCBmb3JtJylcbmNvbnN0IGZvcm1UZWxlcGhvbmVDb250cm9scyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNvbnRyb2xzJylcblxuY29uc3QgbnVtYmVycyA9ICcwMTIzNDU2Nzg5J1xuY29uc3QgZGlzYWJsZVNjcm9sbCA9ICgpID0+IHtcbiAgY29uc3Qgc2Nyb2xsVG9wID0gd2luZG93LnNjcm9sbFlcbiAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5zY3JvbGxUbyh7XG4gICAgICB0b3A6IHNjcm9sbFRvcCxcbiAgICAgIGJlaGF2aW9yOiAnaW5zdGFudCcsXG4gICAgfSlcbiAgfVxufVxuXG5jb25zdCBoYW5kbGVBcnJvd1JpZ2h0ID0gKGNvbnRyb2wpID0+IHtcbiAgY29uc3QgbmV4dENvbnRyb2wgPSBjb250cm9sLm5leHRFbGVtZW50U2libGluZ1xuICBpZihuZXh0Q29udHJvbCl7XG4gICAgbmV4dENvbnRyb2wuZm9jdXMoKVxuICB9XG59XG5cbmNvbnN0IGhhbmRsZUFycm93TGVmdCA9IChjb250cm9sKSA9PiB7XG4gIGNvbnN0IHByZXZDb250cm9sID0gY29udHJvbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG4gIGlmKHByZXZDb250cm9sKXtcbiAgICBwcmV2Q29udHJvbC5mb2N1cygpXG4gIH1cbn1cblxuY29uc3QgaGFuZGxlSW5wdXQgPSAoa2V5LCBjb250cm9sKSA9PiB7XG4gIGlmKGtleSA9PSAnQmFja3NwYWNlJykge1xuICAgIGlmKGNvbnRyb2wudmFsdWUgPT0gJycpe1xuICAgICAgaGFuZGxlQXJyb3dMZWZ0KGNvbnRyb2wpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29udHJvbC52YWx1ZSA9ICcnXG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGlmKGNvbnRyb2wudmFsdWUgIT0gJycpe1xuICAgICAgaGFuZGxlQXJyb3dSaWdodChjb250cm9sKVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBlbmFibGVTY3JvbGwgPSAoKSA9PiB7XG4gIHdpbmRvdy5vbnNjcm9sbCA9IGZ1bmN0aW9uICgpIHt9XG59XG5cbmNvbnN0IGNsb3NlRm9ybUlmT3V0c2lkZSA9IChlKSA9PiB7XG4gIGlmKCFvcGVubmVkRm9ybS5jb250YWlucyhlLnRhcmdldCkgJiYgZS50YXJnZXQgIT0gYnRuKXtcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZW5hYmxlU2Nyb2xsKClcbiAgfVxufVxuXG5jb25zdCBjcmVhdGVOb3RpZmljYXRpb24gPSAoaXNTdWNjZXNzLCBtZXNzYWdlKSA9PiB7XG4gIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gIG5vdGlmaWNhdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3VjY2VzcycsIGlzU3VjY2VzcylcbiAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlXG4gICAgbm90aWZpY2F0aW9uLmFwcGVuZChwKVxuICAgIGlmKG1lc3NhZ2UgPT0gbm90aWZpY2F0aW9uTWVzc2FnZXMuc3VjY2Vzcyl7XG4gICAgICBjb25zdCBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7JylcbiAgICAgIGNvbnN0IGxpbWl0Q29va2llID0gY29va2llcy5maW5kKGNvb2tpZSA9PiBjb29raWUudHJpbSgpLnN0YXJ0c1dpdGgoJ2xpbWl0JykpXG4gICAgICBjb25zdCBsaW1pdFZhbHVlID0gbGltaXRDb29raWUuc3BsaXQoJz0nKVsxXVxuICAgICAgY29uc3QgaGlnaGxpZ2h0U3BhbiA9IHAucXVlcnlTZWxlY3RvcignLmhpZ2hsaWdodCcpXG4gICAgICBoaWdobGlnaHRTcGFuLmFwcGVuZChsaW1pdFZhbHVlKVxuICAgIH1cbiAgbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5hZGQoJ25vdGlmaWNhdGlvbicpXG4gIG5vdGlmaWNhdGlvbnMuYXBwZW5kKG5vdGlmaWNhdGlvbilcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5hZGQoJ3Nob3duJylcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93bicpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbm90aWZpY2F0aW9uLnJlbW92ZSgpXG4gICAgICB9LCA1MDApXG4gICAgfSwgNTAwMClcbiAgfSwgMTAwKVxufVxuXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGRpc2FibGVTY3JvbGwoKVxuXHRmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG59KVxuY3Jvc3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGVuYWJsZVNjcm9sbCgpXG5cdGZvcm1Cb3guY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbn0pXG5mb3JtVGVsZXBob25lQ29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcbiAgY29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICBpZihlLmtleSA9PSAnQXJyb3dSaWdodCcpe1xuICAgICAgaGFuZGxlQXJyb3dSaWdodChjb250cm9sKVxuICAgIH1cbiAgICBlbHNlIGlmKGUua2V5ID09ICdBcnJvd0xlZnQnKXtcbiAgICAgIGhhbmRsZUFycm93TGVmdChjb250cm9sKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGhhbmRsZUlucHV0KGUua2V5LCBjb250cm9sKVxuICAgIH1cbiAgfSlcbiAgY29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgaWYoIW51bWJlcnMuaW5jbHVkZXMoZS50YXJnZXQudmFsdWUpKXtcbiAgICAgIGUudGFyZ2V0LnZhbHVlID0gJydcbiAgICB9XG4gIH0pXG59KVxuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KClcbiAgY29uc3Qgc2V0U2VuZExpbWl0ID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgZGF5ID0gMjQgKiA2MCAqIDYwICogMTAwMFxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpXG4gICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgZGF5KVxuICAgIGRvY3VtZW50LmNvb2tpZSA9IGBsaW1pdD0ke3ZhbHVlfTsgZXhwaXJlcyA9ICR7ZGF0ZX1gXG4gIH1cbiAgXG4gIGNvbnN0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKVxuICBjb25zdCBjb29sZG93bkNvb2tpZSA9IGNvb2tpZXMuZmluZChjb29raWUgPT4gY29va2llLnRyaW0oKS5zdGFydHNXaXRoKCdlbWFpbENvb2xkb3duJykpXG4gIGlmKCFjb29sZG93bkNvb2tpZSl7XG4gICAgbGV0IGxpbWl0Q29va2llID0gY29va2llcy5maW5kKGNvb2tpZSA9PiBjb29raWUudHJpbSgpLnN0YXJ0c1dpdGgoJ2xpbWl0JykpXG4gICAgbGV0IGxpbWl0VmFsdWVcbiAgICBpZighbGltaXRDb29raWUpe1xuICAgICAgbGltaXRWYWx1ZSA9IDBcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsaW1pdFZhbHVlID0gK2xpbWl0Q29va2llLnNwbGl0KCc9JylbMV1cbiAgICB9XG4gICAgaWYobGltaXRWYWx1ZSA+PSAzKXtcbiAgICAgIGNvbnN0IHR3b0hvdXJzID0gMTIwICogNjAgKiAxMDAwXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgdHdvSG91cnMpXG4gICAgICBkb2N1bWVudC5jb29raWUgPSBgZW1haWxDb29sZG93biA9IGVtYWlsQ29vbGRvd247IGV4cGlyZXMgPSAgJHtkYXRlfWBcbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGBsaW1pdD0zOyBleHBpcmVzID0gJHtkYXRlfWBcbiAgICAgIGNyZWF0ZU5vdGlmaWNhdGlvbignZmFsc2UnLCBub3RpZmljYXRpb25NZXNzYWdlcy5jb29sZG93bilcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBjb250YWN0U2VydmljZUlkID0gJ3NlcnZpY2VfcGs3YjhvMydcbiAgICAgIGNvbnN0IGNvbnRhY3RGb3JtSWQgPSAndGVtcGxhdGVfeWt5dGZkaydcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgZW1haWxqcy5zZW5kRm9ybShjb250YWN0U2VydmljZUlkLCBjb250YWN0Rm9ybUlkLCBmb3JtKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICAgIGVuYWJsZVNjcm9sbCgpXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKVxuICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGZvcm0ucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKVxuICAgICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgaW5wdXQudmFsdWUgPSAnJ1xuICAgICAgICB9KVxuICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnXG4gICAgICAgIHNldFNlbmRMaW1pdCgrK2xpbWl0VmFsdWUpXG4gICAgICAgIGNyZWF0ZU5vdGlmaWNhdGlvbigndHJ1ZScsIG5vdGlmaWNhdGlvbk1lc3NhZ2VzLnN1Y2Nlc3MpXG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKCdmYWxzZScsIG5vdGlmaWNhdGlvbk1lc3NhZ2VzLmVycm9yKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBjbG9zZUZvcm1JZk91dHNpZGUoZSkpXG5cblxuIl19
