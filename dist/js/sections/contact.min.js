"use strict";emailjs.init("Hhpvi3dgfNV-eaXKW");var btn=document.querySelector(".buttoners"),cross=document.querySelector(".cross"),formBox=document.querySelector(".form-box"),notifications=document.querySelector(".notifications"),notificationMessages={cooldown:'Błąd podczas wysyłania maila.<br>Osiągnięto limit maili wynoszący: <span class="highlight">3</span>.<br>Spróbuj 24h po wysłaniu ostatniego maila.',error:"Błąd podczas wysyłania maila.<br>Spróbuj ponownie później.",success:' E-mail pomyślnie wysłano.<br>Liczba maili możliwych do wysłania<br>w ciągu następnych 24h: <span class="highlight"></span>.'},opennedForm=formBox.querySelector(".open-form-inner"),form=document.querySelector(".contact form"),formTelephoneControls=document.querySelectorAll(".form-controls"),numbers="0123456789",disableScroll=function(){var e=window.scrollY;window.onscroll=function(){window.scrollTo({top:e,behavior:"instant"})}},handleArrowRight=function(e){e=e.nextElementSibling;e&&e.focus()},handleArrowLeft=function(e){e=e.previousElementSibling;e&&e.focus()},handleInput=function(e,o){"Backspace"==e?""==o.value?handleArrowLeft(o):o.value="":""!=o.value&&handleArrowRight(o)},enableScroll=function(){window.onscroll=function(){}},closeFormIfOutside=function(e){opennedForm.contains(e.target)||e.target==btn||(formBox.classList.add("hidden"),enableScroll())},resetForm=function(){var e=form.querySelectorAll("input"),o=form.querySelector("textarea");e.forEach(function(e){e.value=""}),o.value=""},createNotification=function(e,o){var t=document.createElement("div"),e=(t.setAttribute("data-success",e),document.createElement("p"));e.innerHTML=o,t.append(e),o==notificationMessages.success&&(o=3-+document.cookie.split(";").find(function(e){return e.trim().startsWith("limit")}).split("=")[1],e.querySelector(".highlight").append(o)),t.classList.add("notification"),notifications.append(t),setTimeout(function(){t.classList.add("shown"),setTimeout(function(){t.classList.remove("shown"),setTimeout(function(){t.remove()},500)},5e3)},100)};btn.addEventListener("click",function(){disableScroll(),formBox.classList.remove("hidden")}),cross.addEventListener("click",function(){enableScroll(),formBox.classList.add("hidden")}),formTelephoneControls.forEach(function(o){o.addEventListener("keydown",function(e){"ArrowRight"==e.key?handleArrowRight(o):"ArrowLeft"==e.key?handleArrowLeft(o):handleInput(e.key,o)}),o.addEventListener("input",function(e){numbers.includes(e.target.value)||(e.target.value="")})}),form.addEventListener("submit",function(e){e.preventDefault();var t,e=document.cookie.split(";");e.find(function(e){return e.trim().startsWith("emailCooldown")})?(formBox.classList.add("hidden"),enableScroll(),createNotification("false",notificationMessages.cooldown)):(e=e.find(function(e){return e.trim().startsWith("limit")}),3<=(t=e?+e.split("=")[1]:0)?((e=new Date).setTime(e.getTime()+72e5),document.cookie="emailCooldown = emailCooldown; expires =  ".concat(e),document.cookie="limit=3; expires = ".concat(e),resetForm(),formBox.classList.add("hidden"),enableScroll(),createNotification("false",notificationMessages.cooldown)):emailjs.sendForm("service_pk7b8o3","template_ykytfdk",form).then(function(){var e,o;formBox.classList.add("hidden"),enableScroll(),resetForm(),e=++t,(o=new Date).setTime(o.getTime()+864e5),document.cookie="limit=".concat(e,"; expires = ").concat(o),createNotification("true",notificationMessages.success)}).catch(function(){createNotification("false",notificationMessages.error)}))}),window.addEventListener("click",function(e){return closeFormIfOutside(e)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlY3Rpb25zL2NvbnRhY3QuanMiXSwibmFtZXMiOlsiZW1haWxqcyIsImluaXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJidG4iLCJjcm9zcyIsImZvcm1Cb3giLCJub3RpZmljYXRpb25zIiwiY29vbGRvd24iLCJub3RpZmljYXRpb25NZXNzYWdlcyIsImVycm9yIiwib3Blbm5lZEZvcm0iLCJmb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsIm51bWJlcnMiLCJkaXNhYmxlU2Nyb2xsIiwic2Nyb2xsVG9wIiwid2luZG93Iiwic2Nyb2xsWSIsIm9uc2Nyb2xsIiwic2Nyb2xsVG8iLCJ0b3AiLCJiZWhhdmlvciIsIm5leHRDb250cm9sIiwiY29udHJvbCIsIm5leHRFbGVtZW50U2libGluZyIsImZvY3VzIiwicHJldkNvbnRyb2wiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiaGFuZGxlQXJyb3dMZWZ0Iiwia2V5IiwidmFsdWUiLCJoYW5kbGVBcnJvd1JpZ2h0IiwiZW5hYmxlU2Nyb2xsIiwiaW5wdXRzIiwidGV4dGFyZWEiLCJlIiwidGFyZ2V0IiwiZm9yRWFjaCIsImFkZCIsImlucHV0IiwiY3JlYXRlTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImlzU3VjY2VzcyIsImlubmVySFRNTCIsIm1lc3NhZ2UiLCJzdGFydHNXaXRoIiwiaGlnaGxpZ2h0U3BhbiIsImxpbWl0VmFsdWUiLCJsaW1pdENvb2tpZSIsImFwcGVuZCIsInAiLCJjbGFzc0xpc3QiLCJzdWNjZXNzIiwic3BsaXQiLCJmaW5kIiwiY29va2llIiwidHJpbSIsInJlbW92ZSIsInNldFRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZm9ybVRlbGVwaG9uZUNvbnRyb2xzIiwiaW5jbHVkZXMiLCJwcmV2ZW50RGVmYXVsdCIsImRhdGUiLCJnZXRUaW1lIiwiZGF5IiwicmVzZXRGb3JtIiwiY29va2llcyIsIkRhdGUiLCJjb250YWN0U2VydmljZUlkIiwiY29udGFjdEZvcm1JZCIsImNvbmNhdCIsInNlbmRGb3JtIiwidGhlbiIsInNldFRpbWUiLCJjbG9zZUZvcm1JZk91dHNpZGUiXSwibWFwcGluZ3MiOiJhQUNBQSxRQUFRQyxLQUFLLG1CQUFtQixFQUFoQ0QsSUFBQUEsSUFBWUUsU0FBQ0MsY0FBb0IsWUFBQSxFQUUzQkMsTUFBTUYsU0FBU0MsY0FBYyxRQUFZLEVBQ3pDRSxRQUFRSCxTQUFTQyxjQUFjLFdBQVMsRUFDeENHLGNBQWtCSixTQUFDQyxjQUFjLGdCQUFZLEVBQzdDSSxxQkFBeUJKLENBQy9CSyxTQUFNQyxvSkFDSkQsTUFBQUEsNkRBQ0FFLFFBQU8sOEhBRVQsRUFBQ0MsWUFBQUwsUUFBQUgsY0FBQSxrQkFBQSxFQUNLUSxLQUFBQSxTQUFjTCxjQUFRSCxlQUFjLEVBQ3BDUyxzQkFBZ0JULFNBQWNVLGlCQUFnQixnQkFBQSxFQUc5Q0MsUUFBVSxhQUNWQyxjQUFnQixXQUNwQixJQUFNQyxFQUFZQyxPQUFPQyxRQUN6QkQsT0FBT0UsU0FBVyxXQUNoQkYsT0FBT0csU0FBUyxDQUNkQyxJQUFLTCxFQUNMTSxTQUFVLFNBQ1osQ0FBQyxDQUNILENBQ0YsRUFHUUMsaUJBQWNDLFNBQUFBLEdBQ2pCRCxFQUFZQyxFQUFBQyxtQkFDYkYsR0FDRkEsRUFBQUcsTUFBQSxDQUdGLEVBRUtDLGdCQUFZLFNBQUFILEdBQ2JHLEVBQWtCSCxFQUFDSSx1QkFDckJELEdBQ0RBLEVBQUFELE1BQUEsQ0FBRCxFQUtNRyxZQUFBQSxTQUFlQyxFQUFDTixHQUViLGFBREpNLEVBRW1CLElBQWxCTixFQUFRTyxNQUNWRixnQkFBQUwsQ0FBQSxFQUlFUSxFQUFBQSxNQUFnQixHQUtELElBQWZDLEVBQUFBLE9BQ0poQixpQkFBa0JPLENBQUEsQ0FIcEIsRUFTSVMsYUFBYyxXQUNoQmhCLE9BQUFFLFNBQUEsWUFDRixFQUdRZSxtQkFBY3JCLFNBQUFBLEdBQ2RzQixZQUFXdkIsU0FBS1QsRUFBQUEsTUFBYSxHQUFDaUMsRUFBQUMs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QVEyRSxFQVJSckUsUUFVRUEsVUFBUWdELElBQVVmLFFBQUksRUFUeEJOLGFBVUVBLEVBVEZRLG1CQVVhLFFBQUFoQyxxQkFBQUQsUUFBQSxHQU9mUixRQUFBMkUsU0FIZSxrQkFDUSxtQkFFdkIvRCxJQUFBLEVBQ0RnRSxLQUNJLFdBckNjLElBQUE3QyxFQUNvQm1DLEVBcUNyQzVELFFBQVFnRCxVQUFjZixJQUFBLFFBQVMsRUFDL0JOLGFBQWMsRUFDZFEsVUFBQUEsRUF4Q2lCVixFQXlDbkIsRUFBQW1CLEdBeEN1Q2dCLEVBQUlSLElBQU9DLE1BQTJCa0IsUUFBQVgsRUFBQUMsUUFBQSxFQUF2RWhCLEtBQXVFLEVBQzNFakQsU0FBSWdELE9BQVUsU0FBQXdCLE9BQUEzQyxFQUFBLGNBQUEsRUFBQTJDLE9BQUFSLENBQUEsRUF3Q2hCekIsbUJBQUEsT0FBQWhDLHFCQUFBOEMsT0FBQSxDQUVJLENBQUNPLEVBQUFBLE1BQWlDZ0IsV0FBc0JyQyxtQkFBQSxRQUFBaEMscUJBQUFDLEtBQUEsQ0FWeEQsQ0FBQyxFQVFQLENBQUMsRUFFRE8sT0FBTzZDLGlCQUFpQixRQUFTLFNBQUMxQixHQUFDLE9BQUswQyxtQkFBbUIxQyxDQUFDLENBQUMsQ0FBQSIsImZpbGUiOiJzZWN0aW9ucy9jb250YWN0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuZW1haWxqcy5pbml0KCdIaHB2aTNkZ2ZOVi1lYVhLVycpXG5cbmNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25lcnMnKVxuY29uc3QgY3Jvc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3Jvc3MnKVxuY29uc3QgZm9ybUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWJveCcpXG5jb25zdCBub3RpZmljYXRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGlmaWNhdGlvbnMnKVxuY29uc3Qgbm90aWZpY2F0aW9uTWVzc2FnZXMgPSB7XG4gIGNvb2xkb3duOiAnQsWCxIVkIHBvZGN6YXMgd3lzecWCYW5pYSBtYWlsYS48YnI+T3NpxIVnbmnEmXRvIGxpbWl0IG1haWxpIHd5bm9zesSFY3k6IDxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+Mzwvc3Bhbj4uPGJyPlNwcsOzYnVqIDI0aCBwbyB3eXPFgmFuaXUgb3N0YXRuaWVnbyBtYWlsYS4nLFxuICBlcnJvcjogJ0LFgsSFZCBwb2RjemFzIHd5c3nFgmFuaWEgbWFpbGEuPGJyPlNwcsOzYnVqIHBvbm93bmllIHDDs8W6bmllai4nLFxuICBzdWNjZXNzOiAnIEUtbWFpbCBwb215xZtsbmllIHd5c8WCYW5vLjxicj5MaWN6YmEgbWFpbGkgbW/FvGxpd3ljaCBkbyB3eXPFgmFuaWE8YnI+dyBjacSFZ3UgbmFzdMSZcG55Y2ggMjRoOiA8c3BhbiBjbGFzcz1cImhpZ2hsaWdodFwiPjwvc3Bhbj4uJ1xufVxuY29uc3Qgb3Blbm5lZEZvcm0gPSBmb3JtQm94LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuLWZvcm0taW5uZXInKVxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWN0IGZvcm0nKVxuY29uc3QgZm9ybVRlbGVwaG9uZUNvbnRyb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tY29udHJvbHMnKVxuXG5jb25zdCBudW1iZXJzID0gJzAxMjM0NTY3ODknXG5jb25zdCBkaXNhYmxlU2Nyb2xsID0gKCkgPT4ge1xuICBjb25zdCBzY3JvbGxUb3AgPSB3aW5kb3cuc2Nyb2xsWVxuICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgd2luZG93LnNjcm9sbFRvKHtcbiAgICAgIHRvcDogc2Nyb2xsVG9wLFxuICAgICAgYmVoYXZpb3I6ICdpbnN0YW50JyxcbiAgICB9KVxuICB9XG59XG5cbmNvbnN0IGhhbmRsZUFycm93UmlnaHQgPSAoY29udHJvbCkgPT4ge1xuICBjb25zdCBuZXh0Q29udHJvbCA9IGNvbnRyb2wubmV4dEVsZW1lbnRTaWJsaW5nXG4gIGlmKG5leHRDb250cm9sKXtcbiAgICBuZXh0Q29udHJvbC5mb2N1cygpXG4gIH1cbn1cblxuY29uc3QgaGFuZGxlQXJyb3dMZWZ0ID0gKGNvbnRyb2wpID0+IHtcbiAgY29uc3QgcHJldkNvbnRyb2wgPSBjb250cm9sLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgaWYocHJldkNvbnRyb2wpe1xuICAgIHByZXZDb250cm9sLmZvY3VzKClcbiAgfVxufVxuXG5jb25zdCBoYW5kbGVJbnB1dCA9IChrZXksIGNvbnRyb2wpID0+IHtcbiAgaWYoa2V5ID09ICdCYWNrc3BhY2UnKSB7XG4gICAgaWYoY29udHJvbC52YWx1ZSA9PSAnJyl7XG4gICAgICBoYW5kbGVBcnJvd0xlZnQoY29udHJvbClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb250cm9sLnZhbHVlID0gJydcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYoY29udHJvbC52YWx1ZSAhPSAnJyl7XG4gICAgICBoYW5kbGVBcnJvd1JpZ2h0KGNvbnRyb2wpXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGVuYWJsZVNjcm9sbCA9ICgpID0+IHtcbiAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge31cbn1cblxuY29uc3QgY2xvc2VGb3JtSWZPdXRzaWRlID0gKGUpID0+IHtcbiAgaWYoIW9wZW5uZWRGb3JtLmNvbnRhaW5zKGUudGFyZ2V0KSAmJiBlLnRhcmdldCAhPSBidG4pe1xuICAgIGZvcm1Cb3guY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICBlbmFibGVTY3JvbGwoKVxuICB9XG59XG5cbmNvbnN0IHJlc2V0Rm9ybSA9ICgpID0+IHtcbiAgY29uc3QgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpXG4gIGNvbnN0IHRleHRhcmVhID0gZm9ybS5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpXG4gIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICBpbnB1dC52YWx1ZSA9ICcnXG4gIH0pXG4gIHRleHRhcmVhLnZhbHVlID0gJydcbn1cblxuY29uc3QgY3JlYXRlTm90aWZpY2F0aW9uID0gKGlzU3VjY2VzcywgbWVzc2FnZSkgPT4ge1xuICBjb25zdCBub3RpZmljYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICBub3RpZmljYXRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXN1Y2Nlc3MnLCBpc1N1Y2Nlc3MpXG4gICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZVxuICAgIG5vdGlmaWNhdGlvbi5hcHBlbmQocClcbiAgICBpZihtZXNzYWdlID09IG5vdGlmaWNhdGlvbk1lc3NhZ2VzLnN1Y2Nlc3Mpe1xuICAgICAgY29uc3QgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpXG4gICAgICBjb25zdCBsaW1pdENvb2tpZSA9IGNvb2tpZXMuZmluZChjb29raWUgPT4gY29va2llLnRyaW0oKS5zdGFydHNXaXRoKCdsaW1pdCcpKVxuICAgICAgY29uc3QgbGltaXRWYWx1ZSA9IDMgLSArbGltaXRDb29raWUuc3BsaXQoJz0nKVsxXVxuICAgICAgY29uc3QgaGlnaGxpZ2h0U3BhbiA9IHAucXVlcnlTZWxlY3RvcignLmhpZ2hsaWdodCcpXG4gICAgICBoaWdobGlnaHRTcGFuLmFwcGVuZChsaW1pdFZhbHVlKVxuICAgIH1cbiAgbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5hZGQoJ25vdGlmaWNhdGlvbicpXG4gIG5vdGlmaWNhdGlvbnMuYXBwZW5kKG5vdGlmaWNhdGlvbilcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5hZGQoJ3Nob3duJylcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93bicpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbm90aWZpY2F0aW9uLnJlbW92ZSgpXG4gICAgICB9LCA1MDApXG4gICAgfSwgNTAwMClcbiAgfSwgMTAwKVxufVxuXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGRpc2FibGVTY3JvbGwoKVxuXHRmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG59KVxuY3Jvc3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGVuYWJsZVNjcm9sbCgpXG5cdGZvcm1Cb3guY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbn0pXG5mb3JtVGVsZXBob25lQ29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcbiAgY29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICBpZihlLmtleSA9PSAnQXJyb3dSaWdodCcpe1xuICAgICAgaGFuZGxlQXJyb3dSaWdodChjb250cm9sKVxuICAgIH1cbiAgICBlbHNlIGlmKGUua2V5ID09ICdBcnJvd0xlZnQnKXtcbiAgICAgIGhhbmRsZUFycm93TGVmdChjb250cm9sKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGhhbmRsZUlucHV0KGUua2V5LCBjb250cm9sKVxuICAgIH1cbiAgfSlcbiAgY29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgaWYoIW51bWJlcnMuaW5jbHVkZXMoZS50YXJnZXQudmFsdWUpKXtcbiAgICAgIGUudGFyZ2V0LnZhbHVlID0gJydcbiAgICB9XG4gIH0pXG59KVxuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KClcbiAgY29uc3Qgc2V0U2VuZExpbWl0ID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgZGF5ID0gMjQgKiA2MCAqIDYwICogMTAwMFxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpXG4gICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgZGF5KVxuICAgIGRvY3VtZW50LmNvb2tpZSA9IGBsaW1pdD0ke3ZhbHVlfTsgZXhwaXJlcyA9ICR7ZGF0ZX1gXG4gIH1cbiAgXG4gIGNvbnN0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKVxuICBjb25zdCBjb29sZG93bkNvb2tpZSA9IGNvb2tpZXMuZmluZChjb29raWUgPT4gY29va2llLnRyaW0oKS5zdGFydHNXaXRoKCdlbWFpbENvb2xkb3duJykpXG4gIGlmKCFjb29sZG93bkNvb2tpZSl7XG4gICAgbGV0IGxpbWl0Q29va2llID0gY29va2llcy5maW5kKGNvb2tpZSA9PiBjb29raWUudHJpbSgpLnN0YXJ0c1dpdGgoJ2xpbWl0JykpXG4gICAgbGV0IGxpbWl0VmFsdWVcbiAgICBpZighbGltaXRDb29raWUpe1xuICAgICAgbGltaXRWYWx1ZSA9IDBcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsaW1pdFZhbHVlID0gK2xpbWl0Q29va2llLnNwbGl0KCc9JylbMV1cbiAgICB9XG4gICAgaWYobGltaXRWYWx1ZSA+PSAzKXtcbiAgICAgIGNvbnN0IHR3b0hvdXJzID0gMTIwICogNjAgKiAxMDAwXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgdHdvSG91cnMpXG4gICAgICBkb2N1bWVudC5jb29raWUgPSBgZW1haWxDb29sZG93biA9IGVtYWlsQ29vbGRvd247IGV4cGlyZXMgPSAgJHtkYXRlfWBcbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGBsaW1pdD0zOyBleHBpcmVzID0gJHtkYXRlfWBcbiAgICAgIHJlc2V0Rm9ybSgpXG4gICAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICBlbmFibGVTY3JvbGwoKVxuICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKCdmYWxzZScsIG5vdGlmaWNhdGlvbk1lc3NhZ2VzLmNvb2xkb3duKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGNvbnRhY3RTZXJ2aWNlSWQgPSAnc2VydmljZV9wazdiOG8zJ1xuICAgICAgY29uc3QgY29udGFjdEZvcm1JZCA9ICd0ZW1wbGF0ZV95a3l0ZmRrJ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgICBlbWFpbGpzLnNlbmRGb3JtKGNvbnRhY3RTZXJ2aWNlSWQsIGNvbnRhY3RGb3JtSWQsIGZvcm0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGZvcm1Cb3guY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgICAgZW5hYmxlU2Nyb2xsKClcbiAgICAgICAgcmVzZXRGb3JtKClcbiAgICAgICAgc2V0U2VuZExpbWl0KCsrbGltaXRWYWx1ZSlcbiAgICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKCd0cnVlJywgbm90aWZpY2F0aW9uTWVzc2FnZXMuc3VjY2VzcylcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICBjcmVhdGVOb3RpZmljYXRpb24oJ2ZhbHNlJywgbm90aWZpY2F0aW9uTWVzc2FnZXMuZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgZW5hYmxlU2Nyb2xsKClcbiAgICBjcmVhdGVOb3RpZmljYXRpb24oJ2ZhbHNlJywgbm90aWZpY2F0aW9uTWVzc2FnZXMuY29vbGRvd24pXG4gIH1cbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBjbG9zZUZvcm1JZk91dHNpZGUoZSkpXG5cblxuIl19
