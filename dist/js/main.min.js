"use strict";var introText=document.querySelectorAll(".intro-text"),introBtn=document.querySelector(".intro-btn"),viewportWidth=window.innerWidth,cards=document.querySelectorAll(".services__cards .card"),cardsActivatorHandler=function(){cards.forEach(function(e){e.addEventListener("click",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")}),e.addEventListener("touchend",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")})})},cardOutsideHandler=function(e){e.target.classList.contains("card")||cards.forEach(function(e){e.classList.remove("active")})},navHandler=function(){function s(){i.classList.remove("active"),e.classList.remove("active")}var e=document.querySelector(".mobile-nav"),t=document.querySelector(".burger-icon"),o=document.querySelectorAll(".mobile-nav a"),a=document.querySelector(".nav-list-background"),i=t.cloneNode(!0),t=(i.addEventListener("click",function(){console.log("reveal"),i.classList.toggle("active"),e.classList.toggle("active")}),t.replaceWith(i),o.forEach(function(e){var t=e.cloneNode(!0);t.addEventListener("click",s),e.replaceWith(t)}),a.cloneNode());t.addEventListener("click",s),a.replaceWith(t)},headerParallaxHandler=function(){var e,t,s;viewportWidth<768?document.querySelector(".intro").classList.remove("fixed"):(e=window.scrollY,t=.1*window.scrollY,s=e/100,introText[0].style.transform="translate(".concat(14*t,"px)"),introText[1].style.transform="translate(".concat(-3*t,"px)"),introText[2].style.transform="translate(".concat(16*t,"px)"),introText[3].style.transform="translate(".concat(17*t,"px)"),introText[4].style.transform="translate(".concat(-9*t,"px)"),introText[5].style.transform="translate(".concat(17.5*t,"px)"),introBtn.style.opacity="".concat(.5/s),e>window.innerHeight?introBtn.style.display="none":introBtn.style.display="block")},processTitle=document.querySelector(".processes-content-title"),processText=document.querySelector(".processes-content-text"),processBtns=document.querySelectorAll(".processes-list-item"),chengeProcess=function(e){e=e.target;e.classList.contains("active")||(closeAllProcesses(),e.classList.toggle("active"),setContent())},closeAllProcesses=function(){processBtns.forEach(function(e){return e.classList.remove("active")})},setContent=function(){processBtns[0].classList.contains("active")?(processTitle.textContent="Jak przebiegają rozmowy?",processText.textContent="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque nam dolore voluptate quisquam est impedit molestiae laboriosam, unde reprehenderit ullam, nesciunt nobis repellat repellendus? Ea minima voluptatum temporibus quam delectus Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur officiis saepe, cumque placeat, possimus consectetur, tenetur voluptas est illo nobis harum praesentium asperiores! Cumque autem odit veniam, tenetur illo tempora?"):processBtns[1].classList.contains("active")?(processTitle.textContent="Jak wygląda prezentacja projektu?",processText.textContent="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque nam dolore voluptate quisquam est impedit molestiae laboriosam, ptas est illo nobis harum praesentium asperiores! Cumque autem odit veniam, tenetur illo tempora?"):processBtns[2].classList.contains("active")?(processTitle.textContent="Co to jest zatwierdzenie?",processText.textContent="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque nam dolore voluptate quisquam est impedit molestiae laboriosam, unde reprehenderit ullam, nesciunt nobis repellat repellendus? Ea minima voluptatum temporibus quam delectus Lorem ipsum dolor sit amet, conseumque autem odit veniam, tenetur illo tempora?"):processBtns[3].classList.contains("active")&&(processTitle.textContent="Wykonanie projektu!",processText.textContent="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque nam dolore voluptate quisquam est impedit molestiae laboriosam, unde reprehenderit ullam, nesciunt nobis repellat repellendus? Ea minima voluptatum temporibus quam delectus Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur officiis saepe, cumque placeat, possimus consectetur, tenetur voluptas est illo nobis harum praesentium asperiores! Cumque autem odit veniam, tenetur illo tempora?ellendus? Ea minima voluptatum temporibus quam delectus Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur officiis saepe, cumque plac")},parallaxSection=document.querySelector(".projects-desktop-cnt"),parallaxItems=document.querySelectorAll(".projects-parallax"),prevSection=document.querySelector(".services"),nextSection=document.querySelector(".processes"),viewport=window.innerWidth,prevSectionOffset=prevSection.offsetTop,projectsParallaxHandler=function(){var e,t,s;viewport<992||(s=document.querySelector(".projects .section__heading"),e=prevSectionOffset+prevSection.offsetHeight+s.offsetHeight,t=nextSection.offsetTop-nextSection.offsetHeight+s.offsetHeight/2,document.querySelector(".projects-desktop-cnt").style.height="Calc(600vh + ".concat(s.offsetHeight,"px)"),e<=(s=window.scrollY)&&parallaxSection.classList.add("fixed-pr"),(t<=s||s<e)&&parallaxSection.classList.remove("fixed-pr"),t<=s&&(parallaxItems[0].style.transform="translateY(0)"),parallaxSection.classList.contains("fixed-pr")&&(parallaxItems[0].style.transform="translate(0px, -".concat(s-e,"px)"),parallaxItems[1].style.transform="translate(0px, ".concat(s-e,"px)")),window.scrollY<e&&(parallaxItems[0].style.transform="translate(0, 0)",parallaxItems[1].style.transform="translate(0, 0)"))},firstSection=document.querySelector(".processes"),firstSectionOffsetTop=firstSection.offsetTop,secondSection=document.querySelector(".characteristics"),sectionOffSet=firstSection.offsetTop,nav=document.querySelector(".navbar"),navHeight=nav.offsetHeight,handleParallaxSection=function(){var e,t,s,o,a;viewportWidth<992||(t=(e=window.scrollY)-sectionOffSet,sectionOffSet-navHeight<=e&&!secondSection.classList.contains("static")?(firstSection.classList.add("parallax-sticky"),a=!0):firstSection.classList.remove("parallax-sticky"),firstSection.classList.contains("parallax-sticky")||firstSection.classList.contains("parallax-static")||(secondSection.style.transform="translateX(0)",firstSection.style.transform="translateX(0)"),s=secondSection.getBoundingClientRect(),o=firstSection.getBoundingClientRect(),s=s.top,o=o.top,document.createElement("div").style.height="100vh",viewportWidth<t&&s===o?(secondSection.style.transform="translate(-".concat(viewportWidth,"px, 0)"),firstSection.classList.remove("parallax-sticky"),firstSection.classList.add("parallax-static"),secondSection.classList.add("static"),a=!1,console.log(firstSectionOffsetTop+window.innerHeight),window.scrollTo({top:firstSectionOffsetTop+window.innerHeight-2*navHeight+1,behavior:"instant"})):a=!secondSection.classList.contains("static")||(e<=secondSection.offsetTop-navHeight&&(firstSection.classList.add("parallax-sticky"),firstSection.classList.remove("parallax-static"),secondSection.classList.remove("static"),window.scrollTo({top:firstSectionOffsetTop+viewportWidth,behavior:"instant"}),a=!0),!1),a&&(secondSection.style.transform="translateX(-".concat(t,"px)"),firstSection.style.transform="translateX(-".concat(t,"px)")))},parallaxTexts=document.querySelectorAll(".characteristics-item"),handleParallaxItems=function(e){e.target.classList.contains("reset-pos")&&e.target.classList.remove("reset-pos"),e.target.classList.add("add-pos");var t=e.clientX,s=e.clientY,o=e.target.offsetWidth/2,e=e.target.offsetHeight/2,a=(o-t)/40,i=(e-s)/40;parallaxTexts.forEach(function(e){e.classList.contains("reset-pos")&&e.classList.remove("reset-pos"),e.classList.add("add-pos"),e.style.setProperty("--transform-y","".concat(i,"px")),e.style.setProperty("--transform-x","".concat(a,"px"))})};secondSection.addEventListener("mousemove",handleParallaxItems),secondSection.addEventListener("mouseout",function(){parallaxTexts.forEach(function(e){e.classList.add("reset-pos"),e.classList.remove("add-pos")})}),window.onload=function(){headerParallaxHandler(),viewportWidth<=768&&navHandler(),projectsParallaxHandler(),handleParallaxSection()},processBtns.forEach(function(e){return e.addEventListener("click",chengeProcess)}),window.addEventListener("click",function(e){cardOutsideHandler(e)}),window.addEventListener("scroll",function(){headerParallaxHandler(),projectsParallaxHandler(),handleParallaxSection()}),window.addEventListener("resize",function(){var e=window.innerWidth;e<=768&&navHandler(),992<=e||cardsActivatorHandler()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW50cm9UZXh0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW50cm9CdG4iLCJxdWVyeVNlbGVjdG9yIiwidmlld3BvcnRXaWR0aCIsIndpbmRvdyIsImNhcmRzQWN0aXZhdG9ySGFuZGxlciIsImNhcmRzIiwiZm9yRWFjaCIsImNhcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiZWwiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsImFkZCIsIm1uYXZJdGVtcyIsImNsb3NlIiwiYnVyZ2VySWNvbiIsIm9sZEJ1cmdlckljb24iLCJjbG9uZU5vZGUiLCJvbGROYXZMaXN0QmFja2dyb3VuZCIsInJldmVhbCIsImNvbnNvbGUiLCJ0b2dnbGUiLCJvbGRJdGVtIiwibmF2TGlzdEJhY2tncm91bmQiLCJsb2ciLCJuYXZiYXIiLCJyZXBsYWNlV2l0aCIsIml0ZW0iLCJoZWFkZXJQYXJhbGxheEhhbmRsZXIiLCJzY3JvbGxZIiwicmF0ZSIsInN0eWxlIiwidHJhbnNmb3JtIiwib3BhY2l0eSIsImNvbmNhdCIsIm9wYWNpdHlWYWx1ZSIsIm9mZnNldFkiLCJpbm5lckhlaWdodCIsImRpc3BsYXkiLCJjbG9zZUFsbFByb2Nlc3NlcyIsInByb2Nlc3NUZXh0IiwicHJvY2Vzc0J0bnMiLCJlIiwiYnRuIiwidGV4dENvbnRlbnQiLCJzZXRDb250ZW50IiwicHJvY2Vzc1RpdGxlIiwicGFyYWxsYXhTZWN0aW9uIiwicGFyYWxsYXhJdGVtcyIsIm5leHRTZWN0aW9uIiwiaW5uZXJXaWR0aCIsInByZXZTZWN0aW9uT2Zmc2V0IiwicHJldlNlY3Rpb24iLCJwcm9qZWN0c1BhcmFsbGF4SGFuZGxlciIsInByb2plY3RzRGVza3RvcENudCIsInNlY3Rpb25IZWFkaW5nIiwic2Nyb2xsVG9wIiwiZmlyc3RBbmNob3JQb2ludCIsIm9mZnNldFRvcCIsInNlY29uZEFuY2hvclBvaW50Iiwidmlld3BvcnQiLCJvZmZzZXRIZWlnaHQiLCJoZWlnaHQiLCJmaXJzdFNlY3Rpb25PZmZzZXRUb3AiLCJmaXJzdFNlY3Rpb24iLCJzZWN0aW9uT2ZmU2V0IiwiaGFuZGxlUGFyYWxsYXhTZWN0aW9uIiwic2Nyb2xsVmFsdWUiLCJmaXJzdEFuY2hvciIsInNlY29uZFNlY3Rpb24iLCJzY3JvbGxQZXJtaXNpb24iLCJzZWNvbmRTZWN0aW9uVG9wIiwic2Vjb25kU2VjdGlvblJlY3QiLCJ0b3AiLCJmaXJzdFNlY3Rpb25Ub3AiLCJmaXJzdFNlY3Rpb25SZWN0IiwiZHVtbXkiLCJjcmVhdGVFbGVtZW50IiwibmF2SGVpZ2h0IiwiYmVoYXZpb3IiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzY3JvbGxUbyIsInBhcmFsbGF4VGV4dHMiLCJoYW5kbGVQYXJhbGxheEl0ZW1zIiwidGFyZ2V0Iiwib2Zmc2V0V2lkdGgiLCJtaWRkbGVYIiwiZmluYWxZIiwidGV4dCIsInNldFByb3BlcnR5IiwibmF2SGFuZGxlciIsIngiLCJjbGllbnRYIiwiY2xpZW50WSIsImNoZW5nZVByb2Nlc3MiLCJtaWRkbGVZIiwiY2FyZE91dHNpZGVIYW5kbGVyIiwieSIsImZpbmFsWCIsIm9ubG9hZCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsVUFBWUMsU0FBU0MsaUJBQWlCLGFBQWEsRUFDbkRDLFNBQVdGLFNBQVNHLGNBQWMsWUFBWSxFQUQ5Q0osY0FBWUMsT0FBU0MsV0FFdkJHLE1BQUFBLFNBQWdCQyxpQkFBaUIsd0JBQUEsRUFJL0JDLHNCQUF3QixXQUM3QkMsTUFBS0MsUUFBUSxTQUFDQyxHQUNiQSxFQUFBQSxpQkFBS0MsUUFBd0IsV0FDNUJILE1BQUFBLFFBQU1DLFNBQUFBLEdBQ0xHLEVBQUFDLFVBQU9BLFNBQVVDLFFBQVMsR0FDekJGLEVBQUdDLFVBQUFBLE9BQVVFLFFBQU8sQ0FFdEIsQ0FBQyxFQUNETCxFQUFBQSxVQUFLRyxJQUFVRyxRQUFJLENBQ3BCLENBQUMsRUFFRE4sRUFDQ0YsaUJBQWMsV0FBUSxXQUF0QkEsTUFDQ0MsUUFBT0ksU0FBQUEs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LE9BQU9LLGlCQUFpQixTQUFVLFdBQ2pDcUIsc0JBQXFCLEVBQ3JCeUIsd0JBQXVCLEVBQ3ZCYSxzQkFBcUIsQ0FDdEIsQ0FBQyxFQUVEaEUsT0FBT0ssaUJBQWlCLFNBQVUsV0FDakMsSUFBSU4sRUFBZ0JDLE9BQU9nRCxXQUN2QmpELEdBQWlCLEtBQ3BCeUYsV0FBVSxFQUVVLEtBQWpCekYsR0FDSkUsc0JBQXFCLENBQ3RCLENBQUMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpbnRyb1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW50cm8tdGV4dCcpO1xyXG5jb25zdCBpbnRyb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRyby1idG4nKTtcclxubGV0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHJcbmNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2VzX19jYXJkcyAuY2FyZCcpO1xyXG5cclxuY29uc3QgY2FyZHNBY3RpdmF0b3JIYW5kbGVyID0gKCkgPT4ge1xyXG5cdGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuXHRcdGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdGNhcmRzLmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRcdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGNhcmQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKCkgPT4ge1xyXG5cdFx0XHRjYXJkcy5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0XHRcdGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcblx0XHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRjYXJkLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBjYXJkT3V0c2lkZUhhbmRsZXIgPSAoZSkgPT4ge1xyXG5cdGlmICghZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkJykpIHtcclxuXHRcdGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuXHRcdFx0Y2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IG5hdkhhbmRsZXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgbmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYmlsZS1uYXYnKTtcclxuXHRjb25zdCBvbGRCdXJnZXJJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1pY29uJyk7XHJcblx0Y29uc3QgbW5hdkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vYmlsZS1uYXYgYScpO1xyXG5cdGNvbnN0IG9sZE5hdkxpc3RCYWNrZ3JvdW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdi1saXN0LWJhY2tncm91bmQnKTtcclxuXHRjb25zdCByZXZlYWwgPSAoKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZygncmV2ZWFsJyk7XHJcblx0XHRidXJnZXJJY29uLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG5cdFx0bmF2YmFyLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG5cdH07XHJcblx0Y29uc3QgY2xvc2UgPSAoKSA9PiB7XHJcblx0XHRidXJnZXJJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0bmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdH07XHJcblx0Y29uc3QgYnVyZ2VySWNvbiA9IG9sZEJ1cmdlckljb24uY2xvbmVOb2RlKHRydWUpO1xyXG5cdGJ1cmdlckljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXZlYWwpO1xyXG5cdG9sZEJ1cmdlckljb24ucmVwbGFjZVdpdGgoYnVyZ2VySWNvbik7XHJcblx0bW5hdkl0ZW1zLmZvckVhY2goKG9sZEl0ZW0pID0+IHtcclxuXHRcdGNvbnN0IGl0ZW0gPSBvbGRJdGVtLmNsb25lTm9kZSh0cnVlKTtcclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7XHJcblx0XHRvbGRJdGVtLnJlcGxhY2VXaXRoKGl0ZW0pO1xyXG5cdH0pO1xyXG5cdGNvbnN0IG5hdkxpc3RCYWNrZ3JvdW5kID0gb2xkTmF2TGlzdEJhY2tncm91bmQuY2xvbmVOb2RlKCk7XHJcblx0bmF2TGlzdEJhY2tncm91bmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7XHJcblx0b2xkTmF2TGlzdEJhY2tncm91bmQucmVwbGFjZVdpdGgobmF2TGlzdEJhY2tncm91bmQpO1xyXG59O1xyXG5cclxuY29uc3QgaGVhZGVyUGFyYWxsYXhIYW5kbGVyID0gKCkgPT4ge1xyXG5cdGlmICh2aWV3cG9ydFdpZHRoIDwgNzY4KSB7XHJcblx0XHRjb25zdCBpbnRybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRybycpO1xyXG5cdFx0aW50cm8uY2xhc3NMaXN0LnJlbW92ZSgnZml4ZWQnKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGNvbnN0IG9mZnNldFkgPSB3aW5kb3cuc2Nyb2xsWVxyXG5cdGNvbnN0IHJhdGUgPSB3aW5kb3cuc2Nyb2xsWSAqIDAuMVxyXG5cdGNvbnN0IG9wYWNpdHlWYWx1ZSA9IG9mZnNldFkgLyAxMDBcclxuXHJcblx0aW50cm9UZXh0WzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTR9cHgpYFxyXG5cdGludHJvVGV4dFsxXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cmF0ZSAqIC0zfXB4KWBcclxuXHRpbnRyb1RleHRbMl0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3JhdGUgKiAxNn1weClgXHJcblx0aW50cm9UZXh0WzNdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTd9cHgpYFxyXG5cdGludHJvVGV4dFs0XS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cmF0ZSAqIC05fXB4KWBcclxuXHRpbnRyb1RleHRbNV0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3JhdGUgKiAxNy41fXB4KWBcclxuXHJcblx0aW50cm9CdG4uc3R5bGUub3BhY2l0eSA9IGAkezAuNSAvIG9wYWNpdHlWYWx1ZX1gXHJcbiAgaWYob2Zmc2V0WSA+IHdpbmRvdy5pbm5lckhlaWdodCl7XHJcbiAgICBpbnRyb0J0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgfSBlbHNlIHtcclxuICAgIGludHJvQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgfVxyXG59XHJcblxyXG4vLyBQcm9jZXNzZXMgLSBhY2NvcmRpb25zXHJcblxyXG5cclxuLy8gUHJvY2Vzc2VzIC0gbGlzdFxyXG5cclxuY29uc3QgcHJvY2Vzc1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2Nlc3Nlcy1jb250ZW50LXRpdGxlJyk7XHJcblxyXG5jb25zdCBwcm9jZXNzVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMtY29udGVudC10ZXh0Jyk7XHJcblxyXG5jb25zdCBwcm9jZXNzQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9jZXNzZXMtbGlzdC1pdGVtJyk7XHJcblxyXG5jb25zdCBjaGVuZ2VQcm9jZXNzID0gKGUpID0+IHtcclxuXHRjb25zdCBidG4gPSBlLnRhcmdldDtcclxuXHJcblx0aWYgKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fSBlbHNlIHtcclxuXHRcdGNsb3NlQWxsUHJvY2Vzc2VzKCk7XHJcblx0XHRidG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcblx0fVxyXG5cdHNldENvbnRlbnQoKTtcclxufTtcclxuXHJcbmNvbnN0IGNsb3NlQWxsUHJvY2Vzc2VzID0gKCkgPT4ge1xyXG5cdHByb2Nlc3NCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcclxufTtcclxuXHJcbmNvbnN0IHNldENvbnRlbnQgPSAoKSA9PiB7XHJcblx0aWYgKHByb2Nlc3NCdG5zWzBdLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdHByb2Nlc3NUaXRsZS50ZXh0Q29udGVudCA9ICdKYWsgcHJ6ZWJpZWdhasSFIHJvem1vd3k/JztcclxuXHRcdHByb2Nlc3NUZXh0LnRleHRDb250ZW50ID0gYExvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LiBDdW1xdWUgbmFtIGRvbG9yZSB2b2x1cHRhdGUgcXVpc3F1YW0gZXN0IGltcGVkaXQgbW9sZXN0aWFlIGxhYm9yaW9zYW0sIHVuZGUgcmVwcmVoZW5kZXJpdCB1bGxhbSwgbmVzY2l1bnQgbm9iaXMgcmVwZWxsYXQgcmVwZWxsZW5kdXM/IEVhIG1pbmltYSB2b2x1cHRhdHVtIHRlbXBvcmlidXMgcXVhbSBkZWxlY3R1cyBMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdC4gQ29uc2VxdWF0dXIgb2ZmaWNpaXMgc2FlcGUsIGN1bXF1ZSBwbGFjZWF0LCBwb3NzaW11cyBjb25zZWN0ZXR1ciwgdGVuZXR1ciB2b2x1cHRhcyBlc3QgaWxsbyBub2JpcyBoYXJ1bSBwcmFlc2VudGl1bSBhc3BlcmlvcmVzISBDdW1xdWUgYXV0ZW0gb2RpdCB2ZW5pYW0sIHRlbmV0dXIgaWxsbyB0ZW1wb3JhP2A7XHJcblx0fSBlbHNlIGlmIChwcm9jZXNzQnRuc1sxXS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcblx0XHRwcm9jZXNzVGl0bGUudGV4dENvbnRlbnQgPSAnSmFrIHd5Z2zEhWRhIHByZXplbnRhY2phIHByb2pla3R1Pyc7XHJcblx0XHRwcm9jZXNzVGV4dC50ZXh0Q29udGVudCA9IGBMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdC4gQ3VtcXVlIG5hbSBkb2xvcmUgdm9sdXB0YXRlIHF1aXNxdWFtIGVzdCBpbXBlZGl0IG1vbGVzdGlhZSBsYWJvcmlvc2FtLCBwdGFzIGVzdCBpbGxvIG5vYmlzIGhhcnVtIHByYWVzZW50aXVtIGFzcGVyaW9yZXMhIEN1bXF1ZSBhdXRlbSBvZGl0IHZlbmlhbSwgdGVuZXR1ciBpbGxvIHRlbXBvcmE/YDtcclxuXHR9IGVsc2UgaWYgKHByb2Nlc3NCdG5zWzJdLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdHByb2Nlc3NUaXRsZS50ZXh0Q29udGVudCA9ICdDbyB0byBqZXN0IHphdHdpZXJkemVuaWU/JztcclxuXHRcdHByb2Nlc3NUZXh0LnRleHRDb250ZW50ID0gYExvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LiBDdW1xdWUgbmFtIGRvbG9yZSB2b2x1cHRhdGUgcXVpc3F1YW0gZXN0IGltcGVkaXQgbW9sZXN0aWFlIGxhYm9yaW9zYW0sIHVuZGUgcmVwcmVoZW5kZXJpdCB1bGxhbSwgbmVzY2l1bnQgbm9iaXMgcmVwZWxsYXQgcmVwZWxsZW5kdXM/IEVhIG1pbmltYSB2b2x1cHRhdHVtIHRlbXBvcmlidXMgcXVhbSBkZWxlY3R1cyBMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2V1bXF1ZSBhdXRlbSBvZGl0IHZlbmlhbSwgdGVuZXR1ciBpbGxvIHRlbXBvcmE/YDtcclxuXHR9IGVsc2UgaWYgKHByb2Nlc3NCdG5zWzNdLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdHByb2Nlc3NUaXRsZS50ZXh0Q29udGVudCA9ICdXeWtvbmFuaWUgcHJvamVrdHUhJztcclxuXHRcdHByb2Nlc3NUZXh0LnRleHRDb250ZW50ID0gYExvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LiBDdW1xdWUgbmFtIGRvbG9yZSB2b2x1cHRhdGUgcXVpc3F1YW0gZXN0IGltcGVkaXQgbW9sZXN0aWFlIGxhYm9yaW9zYW0sIHVuZGUgcmVwcmVoZW5kZXJpdCB1bGxhbSwgbmVzY2l1bnQgbm9iaXMgcmVwZWxsYXQgcmVwZWxsZW5kdXM/IEVhIG1pbmltYSB2b2x1cHRhdHVtIHRlbXBvcmlidXMgcXVhbSBkZWxlY3R1cyBMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdC4gQ29uc2VxdWF0dXIgb2ZmaWNpaXMgc2FlcGUsIGN1bXF1ZSBwbGFjZWF0LCBwb3NzaW11cyBjb25zZWN0ZXR1ciwgdGVuZXR1ciB2b2x1cHRhcyBlc3QgaWxsbyBub2JpcyBoYXJ1bSBwcmFlc2VudGl1bSBhc3BlcmlvcmVzISBDdW1xdWUgYXV0ZW0gb2RpdCB2ZW5pYW0sIHRlbmV0dXIgaWxsbyB0ZW1wb3JhP2VsbGVuZHVzPyBFYSBtaW5pbWEgdm9sdXB0YXR1bSB0ZW1wb3JpYnVzIHF1YW0gZGVsZWN0dXMgTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQuIENvbnNlcXVhdHVyIG9mZmljaWlzIHNhZXBlLCBjdW1xdWUgcGxhY2A7XHJcblx0fVxyXG59O1xyXG5cclxuLyogUFJPSkVDVFMgUEFSQUxMQVggKi9cclxuXHJcbmNvbnN0IHBhcmFsbGF4U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1kZXNrdG9wLWNudCcpO1xyXG5jb25zdCBwYXJhbGxheEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3RzLXBhcmFsbGF4Jyk7XHJcbmNvbnN0IHByZXZTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2VzJyk7XHJcbmNvbnN0IG5leHRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2Nlc3NlcycpO1xyXG5sZXQgdmlld3BvcnQgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxubGV0IHByZXZTZWN0aW9uT2Zmc2V0ID0gcHJldlNlY3Rpb24ub2Zmc2V0VG9wO1xyXG5cclxuY29uc3QgcHJvamVjdHNQYXJhbGxheEhhbmRsZXIgPSAoKSA9PiB7XHJcblx0aWYgKHZpZXdwb3J0IDwgOTkyKSByZXR1cm47XHJcblx0Y29uc3Qgc2VjdGlvbkhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMgLnNlY3Rpb25fX2hlYWRpbmcnKTtcclxuXHRsZXQgZmlyc3RBbmNob3JQb2ludCA9XHJcblx0XHRwcmV2U2VjdGlvbk9mZnNldCArIHByZXZTZWN0aW9uLm9mZnNldEhlaWdodCArIHNlY3Rpb25IZWFkaW5nLm9mZnNldEhlaWdodDtcclxuXHRsZXQgc2Vjb25kQW5jaG9yUG9pbnQgPVxyXG5cdFx0bmV4dFNlY3Rpb24ub2Zmc2V0VG9wIC1cclxuXHRcdG5leHRTZWN0aW9uLm9mZnNldEhlaWdodCArXHJcblx0XHRzZWN0aW9uSGVhZGluZy5vZmZzZXRIZWlnaHQgLyAyO1xyXG5cdGNvbnN0IHByb2plY3RzRGVza3RvcENudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1kZXNrdG9wLWNudCcpO1xyXG5cdHByb2plY3RzRGVza3RvcENudC5zdHlsZS5oZWlnaHQgPSBgQ2FsYyg2MDB2aCArICR7c2VjdGlvbkhlYWRpbmcub2Zmc2V0SGVpZ2h0fXB4KWA7XHJcblxyXG5cdGxldCBzY3JvbGxUb3AgPSB3aW5kb3cuc2Nyb2xsWTtcclxuXHQvLyBsZXQgc2Nyb2xsVG9BbmNob3IgPSBuZXh0U2VjdGlvbi5vZmZzZXRIZWlnaHQgKyBuZXh0U2VjdGlvbi5vZmZzZXRUb3BcclxuXHRpZiAoc2Nyb2xsVG9wID49IGZpcnN0QW5jaG9yUG9pbnQpIHtcclxuXHRcdHBhcmFsbGF4U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdmaXhlZC1wcicpO1xyXG5cdH1cclxuXHRpZiAoc2Nyb2xsVG9wID49IHNlY29uZEFuY2hvclBvaW50IHx8IHNjcm9sbFRvcCA8IGZpcnN0QW5jaG9yUG9pbnQpIHtcclxuXHRcdHBhcmFsbGF4U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZC1wcicpO1xyXG5cdH1cclxuXHRpZiAoc2Nyb2xsVG9wID49IHNlY29uZEFuY2hvclBvaW50KSB7XHJcblx0XHRwYXJhbGxheEl0ZW1zWzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKDApYDtcclxuXHR9XHJcblxyXG5cdGlmIChwYXJhbGxheFNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdmaXhlZC1wcicpKSB7XHJcblx0XHRwYXJhbGxheEl0ZW1zWzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMHB4LCAtJHtcclxuXHRcdFx0c2Nyb2xsVG9wIC0gZmlyc3RBbmNob3JQb2ludFxyXG5cdFx0fXB4KWA7XHJcblx0XHRwYXJhbGxheEl0ZW1zWzFdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMHB4LCAke1xyXG5cdFx0XHRzY3JvbGxUb3AgLSBmaXJzdEFuY2hvclBvaW50XHJcblx0XHR9cHgpYDtcclxuXHR9XHJcblx0aWYgKHdpbmRvdy5zY3JvbGxZIDwgZmlyc3RBbmNob3JQb2ludCkge1xyXG5cdFx0cGFyYWxsYXhJdGVtc1swXS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDAsIDApJztcclxuXHRcdHBhcmFsbGF4SXRlbXNbMV0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKSc7XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBmaXJzdFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvY2Vzc2VzJylcclxuY29uc3QgZmlyc3RTZWN0aW9uT2Zmc2V0VG9wID0gZmlyc3RTZWN0aW9uLm9mZnNldFRvcFxyXG5jb25zdCBzZWNvbmRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXJhY3RlcmlzdGljcycpXHJcbmNvbnN0IHNlY3Rpb25PZmZTZXQgPSBmaXJzdFNlY3Rpb24ub2Zmc2V0VG9wXHJcbmNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXInKVxyXG5jb25zdCBuYXZIZWlnaHQgPSBuYXYub2Zmc2V0SGVpZ2h0XHJcbmNvbnN0IGhhbmRsZVBhcmFsbGF4U2VjdGlvbiA9ICgpID0+IHtcclxuXHRpZiAodmlld3BvcnRXaWR0aCA8IDk5MikgcmV0dXJuXHJcblx0bGV0IHNjcm9sbFBlcm1pc2lvblxyXG5cdGNvbnN0IHNjcm9sbFZhbHVlID0gd2luZG93LnNjcm9sbFlcclxuXHRjb25zdCByYXRlID0gc2Nyb2xsVmFsdWUgLSBzZWN0aW9uT2ZmU2V0XHJcblx0Y29uc3QgZmlyc3RBbmNob3IgPSBzZWN0aW9uT2ZmU2V0IC0gbmF2SGVpZ2h0IDw9IHNjcm9sbFZhbHVlXHJcblx0aWYgKGZpcnN0QW5jaG9yICYmICFzZWNvbmRTZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucygnc3RhdGljJykpIHtcclxuXHRcdGZpcnN0U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdwYXJhbGxheC1zdGlja3knKTtcclxuXHRcdHNjcm9sbFBlcm1pc2lvbiA9IHRydWU7XHJcblx0fSBlbHNlIHtcclxuXHRcdGZpcnN0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdwYXJhbGxheC1zdGlja3knKTtcclxuXHR9XHJcblxyXG5cdGlmIChcclxuXHRcdCFmaXJzdFNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXJhbGxheC1zdGlja3knKSAmJlxyXG5cdFx0IWZpcnN0U2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3BhcmFsbGF4LXN0YXRpYycpXHJcblx0KSB7XHJcblx0XHRzZWNvbmRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKDApYDtcclxuXHRcdGZpcnN0U2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgwKWA7XHJcblx0fVxyXG5cclxuXHRjb25zdCBzZWNvbmRTZWN0aW9uUmVjdCA9IHNlY29uZFNlY3Rpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuXHRjb25zdCBmaXJzdFNlY3Rpb25SZWN0ID0gZmlyc3RTZWN0aW9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblx0Y29uc3Qgc2Vjb25kU2VjdGlvblRvcCA9IHNlY29uZFNlY3Rpb25SZWN0LnRvcFxyXG5cdGNvbnN0IGZpcnN0U2VjdGlvblRvcCA9IGZpcnN0U2VjdGlvblJlY3QudG9wXHJcbiAgY29uc3QgZHVtbXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gIGR1bW15LnN0eWxlLmhlaWdodCA9ICcxMDB2aCdcclxuXHRpZiAocmF0ZSA+IHZpZXdwb3J0V2lkdGggJiYgc2Vjb25kU2VjdGlvblRvcCA9PT0gZmlyc3RTZWN0aW9uVG9wKSB7XHJcbiAgICBzZWNvbmRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLSR7dmlld3BvcnRXaWR0aH1weCwgMClgXHJcblx0XHRmaXJzdFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgncGFyYWxsYXgtc3RpY2t5JylcclxuXHRcdGZpcnN0U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdwYXJhbGxheC1zdGF0aWMnKVxyXG5cdFx0c2Vjb25kU2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdzdGF0aWMnKVxyXG5cdFx0c2Nyb2xsUGVybWlzaW9uID0gZmFsc2VcclxuICAgIGNvbnNvbGUubG9nKGZpcnN0U2VjdGlvbk9mZnNldFRvcCArIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oe1xyXG4gICAgICB0b3A6IGZpcnN0U2VjdGlvbk9mZnNldFRvcCArIHdpbmRvdy5pbm5lckhlaWdodCAtIG5hdkhlaWdodCAqIDIgKyAxLFxyXG4gICAgICBiZWhhdmlvcjogJ2luc3RhbnQnXHJcbiAgICB9KVxyXG5cdH0gXHJcbiAgZWxzZSB7XHJcblx0XHRpZiAoc2Vjb25kU2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3N0YXRpYycpKSB7XHJcblx0XHRcdGNvbnN0IHNlY29uZE9mZlNldCA9IHNlY29uZFNlY3Rpb24ub2Zmc2V0VG9wO1xyXG5cdFx0XHRpZiAoc2Vjb25kT2ZmU2V0IC0gbmF2SGVpZ2h0ID49IHNjcm9sbFZhbHVlKSB7XHJcblx0XHRcdFx0Zmlyc3RTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ3BhcmFsbGF4LXN0aWNreScpXHJcblx0XHRcdFx0Zmlyc3RTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BhcmFsbGF4LXN0YXRpYycpXHJcblx0XHRcdFx0c2Vjb25kU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdzdGF0aWMnKVxyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgICB0b3A6IGZpcnN0U2VjdGlvbk9mZnNldFRvcCArIHZpZXdwb3J0V2lkdGgsXHJcbiAgICAgICAgICBiZWhhdmlvcjogJ2luc3RhbnQnXHJcbiAgICAgICAgfSlcclxuXHRcdFx0XHRzY3JvbGxQZXJtaXNpb24gPSB0cnVlXHJcblx0XHRcdH1cclxuXHRcdFx0c2Nyb2xsUGVybWlzaW9uID0gZmFsc2U7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzY3JvbGxQZXJtaXNpb24gPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKHNjcm9sbFBlcm1pc2lvbikge1xyXG5cdFx0c2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHtyYXRlfXB4KWBcclxuXHRcdGZpcnN0U2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHtyYXRlfXB4KWBcclxuXHR9XHJcbn1cclxuXHJcbi8vIHBhcmFsbGF4IEl0ZW1zXHJcblxyXG5jb25zdCBwYXJhbGxheFRleHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXJhY3RlcmlzdGljcy1pdGVtJyk7XHJcbmNvbnN0IGhhbmRsZVBhcmFsbGF4SXRlbXMgPSAoZSkgPT4ge1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0LXBvcycpKSB7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdyZXNldC1wb3MnKTtcclxuXHR9XHJcblx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWRkLXBvcycpO1xyXG5cclxuXHRsZXQgeCA9IGUuY2xpZW50WDtcclxuXHRsZXQgeSA9IGUuY2xpZW50WTtcclxuXHRjb25zdCBtaWRkbGVYID0gZS50YXJnZXQub2Zmc2V0V2lkdGggLyAyO1xyXG5cdGNvbnN0IG1pZGRsZVkgPSBlLnRhcmdldC5vZmZzZXRIZWlnaHQgLyAyO1xyXG5cdGxldCBmaW5hbFggPSAobWlkZGxlWCAtIHgpIC8gNDA7XHJcblx0bGV0IGZpbmFsWSA9IChtaWRkbGVZIC0geSkgLyA0MDtcclxuXHJcblx0cGFyYWxsYXhUZXh0cy5mb3JFYWNoKCh0ZXh0KSA9PiB7XHJcblx0XHRpZiAodGV4dC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0LXBvcycpKSB7XHJcblx0XHRcdHRleHQuY2xhc3NMaXN0LnJlbW92ZSgncmVzZXQtcG9zJyk7XHJcblx0XHR9XHJcblx0XHR0ZXh0LmNsYXNzTGlzdC5hZGQoJ2FkZC1wb3MnKTtcclxuXHJcblx0XHR0ZXh0LnN0eWxlLnNldFByb3BlcnR5KCctLXRyYW5zZm9ybS15JywgYCR7ZmluYWxZfXB4YCk7XHJcblx0XHR0ZXh0LnN0eWxlLnNldFByb3BlcnR5KCctLXRyYW5zZm9ybS14JywgYCR7ZmluYWxYfXB4YCk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5zZWNvbmRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZVBhcmFsbGF4SXRlbXMpO1xyXG5zZWNvbmRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xyXG5cdHBhcmFsbGF4VGV4dHMuZm9yRWFjaCgodGV4dCkgPT4ge1xyXG5cdFx0dGV4dC5jbGFzc0xpc3QuYWRkKCdyZXNldC1wb3MnKTtcclxuXHRcdHRleHQuY2xhc3NMaXN0LnJlbW92ZSgnYWRkLXBvcycpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbi8vIGZ1bmN0aW9ucyBhY3Rpb25zXHJcblxyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG5cdGhlYWRlclBhcmFsbGF4SGFuZGxlcigpXHJcbiAgaWYodmlld3BvcnRXaWR0aCA8PSA3Njgpe1xyXG4gICAgbmF2SGFuZGxlcigpXHJcbiAgfVxyXG4gIHByb2plY3RzUGFyYWxsYXhIYW5kbGVyKClcclxuXHRoYW5kbGVQYXJhbGxheFNlY3Rpb24oKVxyXG59XHJcblxyXG5wcm9jZXNzQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZW5nZVByb2Nlc3MpKTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdGNhcmRPdXRzaWRlSGFuZGxlcihlKVxyXG59KVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcclxuXHRoZWFkZXJQYXJhbGxheEhhbmRsZXIoKTtcclxuXHRwcm9qZWN0c1BhcmFsbGF4SGFuZGxlcigpO1xyXG5cdGhhbmRsZVBhcmFsbGF4U2VjdGlvbigpO1xyXG59KTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcblx0bGV0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHRpZiAodmlld3BvcnRXaWR0aCA8PSA3NjgpIHtcclxuXHRcdG5hdkhhbmRsZXIoKTtcclxuXHR9XHJcblx0aWYgKHZpZXdwb3J0V2lkdGggPj0gOTkyKSByZXR1cm47XHJcblx0Y2FyZHNBY3RpdmF0b3JIYW5kbGVyKCk7XHJcbn0pXHJcbiJdfQ==
