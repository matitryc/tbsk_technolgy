"use strict";var introText=document.querySelectorAll(".intro-text"),introBtn=document.querySelector(".intro-btn"),racoon=document.querySelector(".racoon"),intro=document.querySelector(".intro"),nav=document.querySelector(".navbar"),viewportWidth=window.innerWidth,cards=document.querySelectorAll(".services__cards .card"),cardsActivatorHandler=function(){cards.forEach(function(e){e.addEventListener("click",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")}),e.addEventListener("touchend",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")})})},cardOutsideHandler=function(e){e.target.classList.contains("card")||cards.forEach(function(e){e.classList.remove("active")})},navHandler=function(){function o(){s.classList.remove("active"),t.classList.remove("active"),n.setAttribute("aria-expanded","false")}var t=document.querySelector(".navbar"),e=document.querySelector(".burger-icon"),a=document.querySelectorAll(".mobile-nav a"),n=document.querySelector(".mobile-nav .nav-list"),r=document.querySelector(".nav-list-background"),s=e.cloneNode(!0),e=(s.addEventListener("click",function(){s.classList.toggle("active"),t.classList.toggle("active");var e="false"!=(e=n.getAttribute("aria-expanded"));n.setAttribute("aria-expanded",!e)}),e.replaceWith(s),a.forEach(function(e){var t=e.cloneNode(!0);t.addEventListener("click",o),e.replaceWith(t)}),r.cloneNode());e.addEventListener("click",o),r.replaceWith(e)},headerParallaxHandler=function(){var e,t,o;viewportWidth<768?(document.querySelector(".intro").classList.remove("fixed"),introBtn.style.opacity="1",racoon.style.opacity="1",introText.forEach(function(e){e.style.transform="translate(0, 0)"})):(e=window.scrollY,t=.1*window.scrollY,o=1/(e/100+1),introText[0].style.transform="translate(".concat(14*t,"px)"),introText[1].style.transform="translate(".concat(-3*t,"px)"),introText[2].style.transform="translate(".concat(16*t,"px)"),introText[3].style.transform="translate(".concat(17*t,"px)"),introText[4].style.transform="translate(".concat(-9*t,"px)"),introText[5].style.transform="translate(".concat(17.5*t,"px)"),e>window.innerHeight?(intro.style.pointerEvents="none",intro.style.opacity="0"):(introBtn.style.opacity="".concat(o),racoon.style.opacity="".concat(o),intro.style.pointerEvents="all",intro.style.opacity="1"))},processesInfo=[{heading:"Jak przebiegają rozmowy?",text:"Zaczynamy od określenia świadczonej usługi. Jeżeli jest to budowa lub projektowanie, to pytamy czy istnieje jakieś logo, bądź wizytówka firmy. Następnie zapytamy o treści, które miałyby się znaleźć na stronie. Na podstawie tego tworzymy wyłącznie strukturę i wyceniamy projekt. Następnie zaczynamy projektować.",button:"Konsultacja"},{heading:"Jak wygląda prezentacja projektu?",text:"Po skończeniu projektu strony, przedstawiamy go Tobie do ocenienia. Wtedy przyjmujemy wszelkie uwagi dot. doboru kolorów, budowy sekcji itd. Tłumaczymy też, czemu pewne elementy muszą zawierać niektóre cechy. Później nanosimy wszelkie zmiany.",button:"Prezentacja"},{heading:"Czym jest etap zatwierdzenia?",text:"To krok, w którym decydujesz się na podjęcie lub odrzucenie naszych usług. Jeżeli zlecisz nam stworzenie strony, to przekażemy Ci ile prawdopodobnie zajmie to nam czasu. Dodatkowo będziemy potrzebowali dokładnych treści, które mają się finalnie znaleźć na Twojej witrynie.",button:"Zatwierdzenie"},{heading:"Wykonanie projektu!",text:"Ten krok zostaw nam! Od razu zabierzemy się do tworzenia Twojej wymarzonej wizytówki internetowej. Podczas tego czasu możesz nam przekazać wszelkie dodatkowe informacje, a my weźmiemy je pod uwagę. Po zakończonej pracy zostało tylko umieścić ją na hostingu.",button:"Wykonanie"}],processTitle=document.querySelector(".processes-content-title"),processText=document.querySelector(".processes-content-text"),processBtns=document.querySelectorAll(".processes-list-item"),chengeProcess=function(e){e=e.target;e.classList.contains("active")||(closeAllProcesses(),e.classList.toggle("active"),setContent())},closeAllProcesses=function(){processBtns.forEach(function(e){return e.classList.remove("active")})},setContent=function(){for(var e=0;e<processesInfo.length;e++)if(processBtns[e].classList.contains("active"))return processTitle.textContent=processesInfo[e].heading,void(processText.textContent=processesInfo[e].text)},prevSection=document.querySelector(".services"),nextSection=document.querySelector(".processes"),projectsParallaxHandler=function(){var e,t,o,a,n;viewportWidth<992?nextSection.style.transform="translate(0, 0)":(e=document.querySelector(".projects-desktop-cnt"),t=document.querySelectorAll(".projects-parallax"),o=prevSection.offsetTop,n=document.querySelector(".projects .section__heading"),o=o+prevSection.offsetHeight+n.offsetHeight+nav.offsetHeight,a=nextSection.offsetTop-nextSection.offsetHeight+n.offsetHeight,document.querySelector(".projects-desktop-cnt").style.height="Calc(600vh + ".concat(n.offsetHeight,"px)"),o<=(n=window.scrollY)&&e.classList.add("fixed-pr"),(a<=n||n<o)&&e.classList.remove("fixed-pr"),a<=n&&(t[0].style.transform="translate(0, 0)",t[1].style.transform="translate(0, 4200px)"),e.classList.contains("fixed-pr")&&(t[0].style.transform="translate(0px, -".concat(n-o,"px)"),t[1].style.transform="translate(0px, ".concat(n-o,"px)")),n<o&&(t[0].style.transform="translate(0, 0)",t[1].style.transform="translate(0, 0)"),!e.classList.contains(".fixed-pr")&&a<=n&&(t[1].style.transform="translateY(200vh)"))},firstSection=document.querySelector(".processes"),secondSection=document.querySelector(".characteristics"),parallaxHero=document.querySelector(".parallax-hero"),handleParallaxSection=function(){var e,t,o;viewportWidth<992?(secondSection.style.transform="translate(0, 0)",parallaxHero.style.height="0"):(o=firstSection.offsetTop,t=nav.offsetHeight,parallaxHero.style.height="".concat(viewportWidth+t-window.innerHeight,"px"),o=window.scrollY-o,viewportWidth<o?(e=!1,firstSection.style.transform="translate(-".concat(viewportWidth,"px, ").concat(viewportWidth,"px)"),secondSection.style.transform="translate(0, ".concat(viewportWidth-window.innerHeight+t,"px)")):o<=0?(e=!1,firstSection.style.transform="translate(0, 0)",secondSection.style.transform="translate(100%, -100%)"):e=!0,e&&(firstSection.style.transform="translate(-".concat(o,"px, ").concat(o,"px)"),secondSection.style.transform="translate(Calc(100% - ".concat(o,"px), Calc(-100% + ").concat(o,"px))")))},parallaxTexts=document.querySelectorAll(".characteristics-item"),handleParallaxItems=function(e){e.target.classList.contains("reset-pos")&&e.target.classList.remove("reset-pos"),e.target.classList.add("add-pos");var t=e.clientX,o=e.clientY,a=e.target.offsetWidth/2,e=e.target.offsetHeight/2,n=(a-t)/40,r=(e-o)/40;parallaxTexts.forEach(function(e){e.classList.contains("reset-pos")&&e.classList.remove("reset-pos"),e.classList.add("add-pos"),e.style.setProperty("--transform-y","".concat(r,"px")),e.style.setProperty("--transform-x","".concat(n,"px"))})};secondSection.addEventListener("mousemove",handleParallaxItems),secondSection.addEventListener("mouseout",function(){parallaxTexts.forEach(function(e){e.classList.add("reset-pos"),e.classList.remove("add-pos")})}),window.onload=function(){headerParallaxHandler(),viewportWidth<=768&&navHandler(),projectsParallaxHandler(),handleParallaxSection()},processBtns.forEach(function(e){return e.addEventListener("click",chengeProcess)}),window.addEventListener("click",function(e){cardOutsideHandler(e)}),window.addEventListener("scroll",function(){headerParallaxHandler(),projectsParallaxHandler(),handleParallaxSection()}),window.addEventListener("resize",function(){viewportWidth=window.innerWidth,headerParallaxHandler(),viewportWidth<=768&&navHandler(),992<=viewportWidth||(projectsParallaxHandler(),cardsActivatorHandler())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW50cm9UZXh0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW50cm9CdG4iLCJxdWVyeVNlbGVjdG9yIiwicmFjb29uIiwiaW50cm8iLCJ3aW5kb3ciLCJ2aWV3cG9ydFdpZHRoIiwiY2FyZHNBY3RpdmF0b3JIYW5kbGVyIiwiY2FyZHMiLCJmb3JFYWNoIiwiY2FyZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwibW5hdkl0ZW1zIiwiY2xvc2UiLCJidXJnZXJJY29uIiwib2xkQnVyZ2VySWNvbiIsImNsb25lTm9kZSIsInJlcGxhY2VXaXRoIiwibmF2TGlzdCIsIm9sZE5hdkxpc3RCYWNrZ3JvdW5kIiwicmV2ZWFsIiwidG9nZ2xlIiwibmF2YmFyIiwib2xkSXRlbSIsImhlYWRlclBhcmFsbGF4SGFuZGxlciIsImlzRXhwYW5kZWQiLCJnZXRBdHRyaWJ1dGUiLCJpdGVtIiwibmF2TGlzdEJhY2tncm91bmQiLCJ0cmFuc2Zvcm0iLCJzdHlsZSIsIm9wYWNpdHkiLCJ0ZXh0IiwicmF0ZSIsInBvaW50ZXJFdmVudHMiLCJjb25jYXQiLCJvcGFjaXR5VmFsdWUiLCJvZmZzZXRZIiwiaW5uZXJIZWlnaHQiLCJwcm9jZXNzZXNJbmZvIiwiaGVhZGluZyIsImJ1dHRvbiIsInByb2Nlc3NUaXRsZSIsImNoZW5nZVByb2Nlc3MiLCJidG4iLCJjbG9zZUFsbFByb2Nlc3NlcyIsInByb2Nlc3NCdG5zIiwiZSIsInRhcmdldCIsImxlbmd0aCIsInRleHRDb250ZW50Iiwic2V0Q29udGVudCIsInByZXZTZWN0aW9uIiwibmV4dFNlY3Rpb24iLCJpIiwicHJvY2Vzc1RleHQiLCJwYXJhbGxheFNlY3Rpb24iLCJwcm9qZWN0c0Rlc2t0b3BDbnQiLCJoZWlnaHQiLCJzY3JvbGxUb3AiLCJzY3JvbGxZIiwiZmlyc3RBbmNob3JQb2ludCIsInNlY29uZEFuY2hvclBvaW50IiwicGFyYWxsYXhJdGVtcyIsIm9mZnNldFRvcCIsInByZXZTZWN0aW9uT2Zmc2V0Iiwic2VjdGlvbkhlYWRpbmciLCJvZmZzZXRIZWlnaHQiLCJuYXYiLCJwYXJhbGxheEhlcm8iLCJoYW5kbGVQYXJhbGxheFNlY3Rpb24iLCJzZWNvbmRTZWN0aW9uIiwiZmlyc3RTZWN0aW9uIiwic2Nyb2xsVmFsdWUiLCJzZWN0aW9uT2ZmU2V0Iiwic2Nyb2xsUGVybWlzaW9uIiwiaGFuZGxlUGFyYWxsYXhJdGVtcyIsIm1pZGRsZVkiLCJtaWRkbGVYIiwieCIsInNldFByb3BlcnR5IiwibmF2SGVpZ2h0IiwicGFyYWxsYXhUZXh0cyIsInByb2plY3RzUGFyYWxsYXhIYW5kbGVyIiwiY2FyZE91dHNpZGVIYW5kbGVyIiwieSIsImNsaWVudFkiLCJvZmZzZXRXaWR0aCIsImlubmVyV2lkdGgiLCJuYXZIYW5kbGVyIiwiZmluYWxZIiwiZmluYWxYIiwib25sb2FkIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxVQUFZQyxTQUFTQyxpQkFBaUIsYUFBYSxFQUNuREMsU0FBV0YsU0FBU0csY0FBYyxZQUFZLEVBRDlDSixPQUFTQyxTQUFXRyxjQUFDRixTQUFpQixFQUN0Q0MsTUFBUUYsU0FBV0csY0FBYyxRQUFDLEVBQ2xDQyxJQUFNSixTQUFXRyxjQUFjLFNBQUMsRUFDaENFLGNBQWdCQyxPQUFDSCxXQUVuQkksTUFBQUEsU0FBZ0JELGlCQUFpQix3QkFBQSxFQUkvQkUsc0JBQXdCLFdBQzdCQyxNQUFLQyxRQUFRLFNBQUNDLEdBQ2JBLEVBQUFBLGlCQUFLQyxRQUF3QixXQUM1QkgsTUFBQUEsUUFBTUMsU0FBQUEsR0FDTEcsRUFBQUMsVUFBT0EsU0FBVUMsUUFBUyxHQUN6QkYsRUFBR0MsVUFBQUEsT0FBVUUsUUFBTyxDQUV0QixDQUFDLEVBQ0RMLEVBQUFBLFVBQUtHLElBQVVHLFFBQUksQ0FDcEIsQ0FBQyxFQUVETixFQUNDRixpQkFBYyxXQUFRLFdBQXRCQSxNQUNDQyxRQUFPSSxTQUFBQSxHQUFIRCxF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QUN2QixDQUFDLEVBRUR0RSxPQUFPTSxpQkFBaUIsU0FBVSxXQUNqQ0wsY0FBZ0JELE9BQU93RixXQUN0QmhFLHNCQUFzQixFQUNuQnZCLGVBQWlCLEtBQ3BCd0YsV0FBVyxFQUVTLEtBQWpCeEYsZ0JBQ0hrRix3QkFBd0IsRUFDekJqRixzQkFBc0IsRUFDdkIsQ0FBQyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGludHJvVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnRyby10ZXh0Jyk7XG5jb25zdCBpbnRyb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRyby1idG4nKTtcbmNvbnN0IHJhY29vbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yYWNvb24nKTtcbmNvbnN0IGludHJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludHJvJyk7XG5jb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJyk7XG5sZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXG5jb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXJ2aWNlc19fY2FyZHMgLmNhcmQnKTtcblxuY29uc3QgY2FyZHNBY3RpdmF0b3JIYW5kbGVyID0gKCkgPT4ge1xuXHRjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG5cdFx0Y2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdGNhcmRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG5cdFx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Y2FyZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0XHR9KTtcblxuXHRcdGNhcmQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7XG5cdFx0XHRjYXJkcy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHRcdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGNhcmQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuY29uc3QgY2FyZE91dHNpZGVIYW5kbGVyID0gKGUpID0+IHtcblx0aWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQnKSkge1xuXHRcdGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcblx0XHRcdGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0fSk7XG5cdH1cbn07XG5cbmNvbnN0IG5hdkhhbmRsZXIgPSAoKSA9PiB7XG5cdGNvbnN0IG5hdmJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXInKTtcblx0Y29uc3Qgb2xkQnVyZ2VySWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItaWNvbicpO1xuXHRjb25zdCBtbmF2SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9iaWxlLW5hdiBhJyk7XG4gIGNvbnN0IG5hdkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9iaWxlLW5hdiAubmF2LWxpc3QnKVxuXHRjb25zdCBvbGROYXZMaXN0QmFja2dyb3VuZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtbGlzdC1iYWNrZ3JvdW5kJyk7XG5cdGNvbnN0IHJldmVhbCA9ICgpID0+IHtcblx0XHRidXJnZXJJY29uLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuXHRcdG5hdmJhci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICBsZXQgaXNFeHBhbmRlZCA9IG5hdkxpc3QuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJylcbiAgICBpZihpc0V4cGFuZGVkID09ICdmYWxzZScpe1xuICAgICAgaXNFeHBhbmRlZCA9IGZhbHNlXG4gICAgfSBcbiAgICBlbHNlIHtcbiAgICAgIGlzRXhwYW5kZWQgPSB0cnVlXG4gICAgfVxuICAgIG5hdkxpc3Quc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgIWlzRXhwYW5kZWQpXG5cdH07XG5cdGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuXHRcdGJ1cmdlckljb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0bmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIG5hdkxpc3Quc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcblx0fTtcblx0Y29uc3QgYnVyZ2VySWNvbiA9IG9sZEJ1cmdlckljb24uY2xvbmVOb2RlKHRydWUpO1xuXHRidXJnZXJJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmV2ZWFsKTtcblx0b2xkQnVyZ2VySWNvbi5yZXBsYWNlV2l0aChidXJnZXJJY29uKTtcblx0bW5hdkl0ZW1zLmZvckVhY2goKG9sZEl0ZW0pID0+IHtcblx0XHRjb25zdCBpdGVtID0gb2xkSXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0aXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlKTtcblx0XHRvbGRJdGVtLnJlcGxhY2VXaXRoKGl0ZW0pO1xuXHR9KTtcblx0Y29uc3QgbmF2TGlzdEJhY2tncm91bmQgPSBvbGROYXZMaXN0QmFja2dyb3VuZC5jbG9uZU5vZGUoKTtcblx0bmF2TGlzdEJhY2tncm91bmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7XG5cdG9sZE5hdkxpc3RCYWNrZ3JvdW5kLnJlcGxhY2VXaXRoKG5hdkxpc3RCYWNrZ3JvdW5kKTtcbn07XG5cbmNvbnN0IGhlYWRlclBhcmFsbGF4SGFuZGxlciA9ICgpID0+IHtcblx0aWYgKHZpZXdwb3J0V2lkdGggPCA3NjgpIHtcblx0XHRjb25zdCBpbnRybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRybycpO1xuXHRcdGludHJvLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkJyk7XG4gICAgaW50cm9CdG4uc3R5bGUub3BhY2l0eSA9ICcxJ1xuICAgIHJhY29vbi5zdHlsZS5vcGFjaXR5ID0gJzEnXG4gICAgaW50cm9UZXh0LmZvckVhY2godGV4dCA9PiB7XG4gICAgICB0ZXh0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknXG4gICAgfSlcblx0XHRyZXR1cm47XG5cdH1cblxuXHRjb25zdCBvZmZzZXRZID0gd2luZG93LnNjcm9sbFk7XG5cdGNvbnN0IHJhdGUgPSB3aW5kb3cuc2Nyb2xsWSAqIDAuMTtcblx0Y29uc3Qgb3BhY2l0eVZhbHVlID0gMSAvIChvZmZzZXRZIC8gMTAwICsgMSk7XG5cblx0aW50cm9UZXh0WzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTR9cHgpYDtcblx0aW50cm9UZXh0WzFdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogLTN9cHgpYDtcblx0aW50cm9UZXh0WzJdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTZ9cHgpYDtcblx0aW50cm9UZXh0WzNdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTd9cHgpYDtcblx0aW50cm9UZXh0WzRdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogLTl9cHgpYDtcblx0aW50cm9UZXh0WzVdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTcuNX1weClgO1xuXG5cdGlmIChvZmZzZXRZID4gd2luZG93LmlubmVySGVpZ2h0KSB7XG5cdFx0aW50cm8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcblx0XHRpbnRyby5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXHR9IGVsc2Uge1xuXHRcdGludHJvQnRuLnN0eWxlLm9wYWNpdHkgPSBgJHtvcGFjaXR5VmFsdWV9YDtcblx0XHRyYWNvb24uc3R5bGUub3BhY2l0eSA9IGAke29wYWNpdHlWYWx1ZX1gO1xuXHRcdGludHJvLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYWxsJztcblx0XHRpbnRyby5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuXHR9XG59O1xuXG4vLyBQcm9jZXNzZXMgLSBsaXN0XG5jb25zdCBwcm9jZXNzZXNJbmZvID0gW1xuXHR7XG5cdFx0aGVhZGluZzogJ0phayBwcnplYmllZ2FqxIUgcm96bW93eT8nLFxuXHRcdHRleHQ6ICdaYWN6eW5hbXkgb2Qgb2tyZcWbbGVuaWEgxZt3aWFkY3pvbmVqIHVzxYJ1Z2kuIEplxbxlbGkgamVzdCB0byBidWRvd2EgbHViIHByb2pla3Rvd2FuaWUsIHRvIHB5dGFteSBjenkgaXN0bmllamUgamFraWXFmyBsb2dvLCBixIVkxbogd2l6eXTDs3drYSBmaXJteS4gTmFzdMSZcG5pZSB6YXB5dGFteSBvIHRyZcWbY2ksIGt0w7NyZSBtaWHFgnlieSBzacSZIHpuYWxlxbrEhyBuYSBzdHJvbmllLiBOYSBwb2RzdGF3aWUgdGVnbyB0d29yenlteSB3ecWCxIVjem5pZSBzdHJ1a3R1csSZIGkgd3ljZW5pYW15IHByb2pla3QuIE5hc3TEmXBuaWUgemFjenluYW15IHByb2pla3Rvd2HEhy4nLFxuXHRcdGJ1dHRvbjogJ0tvbnN1bHRhY2phJyxcblx0fSxcblx0e1xuXHRcdGhlYWRpbmc6ICdKYWsgd3lnbMSFZGEgcHJlemVudGFjamEgcHJvamVrdHU/Jyxcblx0XHR0ZXh0OiAnUG8gc2tvxYRjemVuaXUgcHJvamVrdHUgc3Ryb255LCBwcnplZHN0YXdpYW15IGdvIFRvYmllIGRvIG9jZW5pZW5pYS4gV3RlZHkgcHJ6eWptdWplbXkgd3N6ZWxraWUgdXdhZ2kgZG90LiBkb2JvcnUga29sb3LDs3csIGJ1ZG93eSBzZWtjamkgaXRkLiBUxYJ1bWFjenlteSB0ZcW8LCBjemVtdSBwZXduZSBlbGVtZW50eSBtdXN6xIUgemF3aWVyYcSHIG5pZWt0w7NyZSBjZWNoeS4gUMOzxbpuaWVqIG5hbm9zaW15IHdzemVsa2llIHptaWFueS4nLFxuXHRcdGJ1dHRvbjogJ1ByZXplbnRhY2phJyxcblx0fSxcblx0e1xuXHRcdGhlYWRpbmc6ICdDenltIGplc3QgZXRhcCB6YXR3aWVyZHplbmlhPycsXG5cdFx0dGV4dDogJ1RvIGtyb2ssIHcga3TDs3J5bSBkZWN5ZHVqZXN6IHNpxJkgbmEgcG9kasSZY2llIGx1YiBvZHJ6dWNlbmllIG5hc3p5Y2ggdXPFgnVnLiBKZcW8ZWxpIHpsZWNpc3ogbmFtIHN0d29yemVuaWUgc3Ryb255LCB0byBwcnpla2HFvGVteSBDaSBpbGUgcHJhd2RvcG9kb2JuaWUgemFqbWllIHRvIG5hbSBjemFzdS4gRG9kYXRrb3dvIGLEmWR6aWVteSBwb3RyemVib3dhbGkgZG9rxYJhZG55Y2ggdHJlxZtjaSwga3TDs3JlIG1hasSFIHNpxJkgZmluYWxuaWUgem5hbGXFusSHIG5hIFR3b2plaiB3aXRyeW5pZS4nLFxuXHRcdGJ1dHRvbjogJ1phdHdpZXJkemVuaWUnLFxuXHR9LFxuXHR7XG5cdFx0aGVhZGluZzogJ1d5a29uYW5pZSBwcm9qZWt0dSEnLFxuXHRcdHRleHQ6ICdUZW4ga3JvayB6b3N0YXcgbmFtISBPZCByYXp1IHphYmllcnplbXkgc2nEmSBkbyB0d29yemVuaWEgVHdvamVqIHd5bWFyem9uZWogd2l6eXTDs3draSBpbnRlcm5ldG93ZWouIFBvZGN6YXMgdGVnbyBjemFzdSBtb8W8ZXN6IG5hbSBwcnpla2F6YcSHIHdzemVsa2llIGRvZGF0a293ZSBpbmZvcm1hY2plLCBhIG15IHdlxbptaWVteSBqZSBwb2QgdXdhZ8SZLiBQbyB6YWtvxYRjem9uZWogcHJhY3kgem9zdGHFgm8gdHlsa28gdW1pZcWbY2nEhyBqxIUgbmEgaG9zdGluZ3UuJyxcblx0XHRidXR0b246ICdXeWtvbmFuaWUnLFxuXHR9LFxuXTtcbmNvbnN0IHByb2Nlc3NUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMtY29udGVudC10aXRsZScpO1xuY29uc3QgcHJvY2Vzc1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvY2Vzc2VzLWNvbnRlbnQtdGV4dCcpO1xuY29uc3QgcHJvY2Vzc0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvY2Vzc2VzLWxpc3QtaXRlbScpO1xuY29uc3QgY2hlbmdlUHJvY2VzcyA9IChlKSA9PiB7XG5cdGNvbnN0IGJ0biA9IGUudGFyZ2V0O1xuXG5cdGlmIChidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHRcdHJldHVybjtcblx0fSBlbHNlIHtcblx0XHRjbG9zZUFsbFByb2Nlc3NlcygpO1xuXHRcdGJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcblx0fVxuXHRzZXRDb250ZW50KCk7XG59O1xuXG5jb25zdCBjbG9zZUFsbFByb2Nlc3NlcyA9ICgpID0+IHtcblx0cHJvY2Vzc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xufTtcblxuY29uc3Qgc2V0Q29udGVudCA9ICgpID0+IHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwcm9jZXNzZXNJbmZvLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKHByb2Nlc3NCdG5zW2ldLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcblx0XHRcdHByb2Nlc3NUaXRsZS50ZXh0Q29udGVudCA9IHByb2Nlc3Nlc0luZm9baV0uaGVhZGluZztcblx0XHRcdHByb2Nlc3NUZXh0LnRleHRDb250ZW50ID0gcHJvY2Vzc2VzSW5mb1tpXS50ZXh0O1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxufTtcblxuLyogUFJPSkVDVFMgUEFSQUxMQVggKi9cbmNvbnN0IHByZXZTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2VzJyk7XG5jb25zdCBuZXh0U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMnKTtcbmNvbnN0IHByb2plY3RzUGFyYWxsYXhIYW5kbGVyID0gKCkgPT4ge1xuXHRpZiAodmlld3BvcnRXaWR0aCA8IDk5Mil7XG4gICAgbmV4dFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKSdcbiAgICByZXR1cm4gXG4gIH1cbiAgY29uc3QgcGFyYWxsYXhTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzLWRlc2t0b3AtY250Jyk7XG4gIGNvbnN0IHBhcmFsbGF4SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdHMtcGFyYWxsYXgnKTtcbiAgbGV0IHByZXZTZWN0aW9uT2Zmc2V0ID0gcHJldlNlY3Rpb24ub2Zmc2V0VG9wO1xuXHRjb25zdCBzZWN0aW9uSGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cyAuc2VjdGlvbl9faGVhZGluZycpO1xuXHRsZXQgZmlyc3RBbmNob3JQb2ludCA9XG5cdFx0cHJldlNlY3Rpb25PZmZzZXQgK1xuXHRcdHByZXZTZWN0aW9uLm9mZnNldEhlaWdodCArXG5cdFx0c2VjdGlvbkhlYWRpbmcub2Zmc2V0SGVpZ2h0ICtcblx0XHRuYXYub2Zmc2V0SGVpZ2h0O1xuXHRsZXQgc2Vjb25kQW5jaG9yUG9pbnQgPVxuXHRcdG5leHRTZWN0aW9uLm9mZnNldFRvcCAtXG5cdFx0bmV4dFNlY3Rpb24ub2Zmc2V0SGVpZ2h0ICtcblx0XHRzZWN0aW9uSGVhZGluZy5vZmZzZXRIZWlnaHQ7XG5cdGNvbnN0IHByb2plY3RzRGVza3RvcENudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1kZXNrdG9wLWNudCcpO1xuXHRwcm9qZWN0c0Rlc2t0b3BDbnQuc3R5bGUuaGVpZ2h0ID0gYENhbGMoNjAwdmggKyAke3NlY3Rpb25IZWFkaW5nLm9mZnNldEhlaWdodH1weClgO1xuXG5cdGxldCBzY3JvbGxUb3AgPSB3aW5kb3cuc2Nyb2xsWTtcblx0aWYgKHNjcm9sbFRvcCA+PSBmaXJzdEFuY2hvclBvaW50KSB7XG5cdFx0cGFyYWxsYXhTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2ZpeGVkLXByJyk7XG5cdH1cblx0aWYgKHNjcm9sbFRvcCA+PSBzZWNvbmRBbmNob3JQb2ludCB8fCBzY3JvbGxUb3AgPCBmaXJzdEFuY2hvclBvaW50KSB7XG5cdFx0cGFyYWxsYXhTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkLXByJyk7XG5cdH1cblx0aWYgKHNjcm9sbFRvcCA+PSBzZWNvbmRBbmNob3JQb2ludCkge1xuXHRcdHBhcmFsbGF4SXRlbXNbMF0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgwLCAwKWA7XG5cdFx0cGFyYWxsYXhJdGVtc1sxXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsIDQyMDBweClgO1xuXHR9XG5cblx0aWYgKHBhcmFsbGF4U2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpeGVkLXByJykpIHtcblx0XHRwYXJhbGxheEl0ZW1zWzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMHB4LCAtJHtcblx0XHRcdHNjcm9sbFRvcCAtIGZpcnN0QW5jaG9yUG9pbnRcblx0XHR9cHgpYDtcblx0XHRwYXJhbGxheEl0ZW1zWzFdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMHB4LCAke1xuXHRcdFx0c2Nyb2xsVG9wIC0gZmlyc3RBbmNob3JQb2ludFxuXHRcdH1weClgO1xuXHR9XG5cdGlmIChzY3JvbGxUb3AgPCBmaXJzdEFuY2hvclBvaW50KSB7XG5cdFx0cGFyYWxsYXhJdGVtc1swXS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDAsIDApJztcblx0XHRwYXJhbGxheEl0ZW1zWzFdLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknO1xuXHR9XG5cdGlmIChcblx0XHQhcGFyYWxsYXhTZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucygnLmZpeGVkLXByJykgJiZcblx0XHRzY3JvbGxUb3AgPj0gc2Vjb25kQW5jaG9yUG9pbnRcblx0KSB7XG5cdFx0Ly9vIGlsb8WbxIcgc2VrY2ppICogMjAwdmhcblx0XHRwYXJhbGxheEl0ZW1zWzFdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKDIwMHZoKWA7XG5cdH1cbn07XG5cbmNvbnN0IGZpcnN0U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMnKTtcbmNvbnN0IHNlY29uZFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhcmFjdGVyaXN0aWNzJyk7XG5jb25zdCBwYXJhbGxheEhlcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFyYWxsYXgtaGVybycpO1xuXG5jb25zdCBoYW5kbGVQYXJhbGxheFNlY3Rpb24gPSAoKSA9PiB7XG5cdGlmICh2aWV3cG9ydFdpZHRoIDwgOTkyKXtcbiAgICBzZWNvbmRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknXG4gICAgcGFyYWxsYXhIZXJvLnN0eWxlLmhlaWdodCA9ICcwJ1xuICAgIHJldHVyblxuICB9XG5cdGxldCBzY3JvbGxQZXJtaXNpb247XG5cdGNvbnN0IHNlY3Rpb25PZmZTZXQgPSBmaXJzdFNlY3Rpb24ub2Zmc2V0VG9wO1xuXHRjb25zdCBuYXZIZWlnaHQgPSBuYXYub2Zmc2V0SGVpZ2h0O1xuXHRwYXJhbGxheEhlcm8uc3R5bGUuaGVpZ2h0ID0gYCR7XG5cdFx0dmlld3BvcnRXaWR0aCArIG5hdkhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodFxuXHR9cHhgO1xuXHRjb25zdCBzY3JvbGxWYWx1ZSA9IHdpbmRvdy5zY3JvbGxZO1xuXHRjb25zdCByYXRlID0gc2Nyb2xsVmFsdWUgLSBzZWN0aW9uT2ZmU2V0O1xuXHRpZiAocmF0ZSA+IHZpZXdwb3J0V2lkdGgpIHtcblx0XHRzY3JvbGxQZXJtaXNpb24gPSBmYWxzZTtcblx0XHRmaXJzdFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtJHt2aWV3cG9ydFdpZHRofXB4LCAke3ZpZXdwb3J0V2lkdGh9cHgpYDtcblx0XHRzZWNvbmRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgJHtcblx0XHRcdHZpZXdwb3J0V2lkdGggLSB3aW5kb3cuaW5uZXJIZWlnaHQgKyBuYXZIZWlnaHRcblx0XHR9cHgpYDtcblx0fSBlbHNlIGlmIChyYXRlIDw9IDApIHtcblx0XHRzY3JvbGxQZXJtaXNpb24gPSBmYWxzZTtcblx0XHRmaXJzdFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgwLCAwKWA7XG5cdFx0c2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDEwMCUsIC0xMDAlKWA7XG5cdH0gZWxzZSB7XG5cdFx0c2Nyb2xsUGVybWlzaW9uID0gdHJ1ZTtcblx0fVxuXHRpZiAoc2Nyb2xsUGVybWlzaW9uKSB7XG5cdFx0Zmlyc3RTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLSR7cmF0ZX1weCwgJHtyYXRlfXB4KWA7XG5cdFx0c2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKENhbGMoMTAwJSAtICR7cmF0ZX1weCksIENhbGMoLTEwMCUgKyAke3JhdGV9cHgpKWA7XG5cdH1cbn07XG5cbi8vIHBhcmFsbGF4IEl0ZW1zXG5cbmNvbnN0IHBhcmFsbGF4VGV4dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhcmFjdGVyaXN0aWNzLWl0ZW0nKTtcbmNvbnN0IGhhbmRsZVBhcmFsbGF4SXRlbXMgPSAoZSkgPT4ge1xuXHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZXNldC1wb3MnKSkge1xuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3Jlc2V0LXBvcycpO1xuXHR9XG5cdGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FkZC1wb3MnKTtcblxuXHRsZXQgeCA9IGUuY2xpZW50WDtcblx0bGV0IHkgPSBlLmNsaWVudFk7XG5cdGNvbnN0IG1pZGRsZVggPSBlLnRhcmdldC5vZmZzZXRXaWR0aCAvIDI7XG5cdGNvbnN0IG1pZGRsZVkgPSBlLnRhcmdldC5vZmZzZXRIZWlnaHQgLyAyO1xuXHRsZXQgZmluYWxYID0gKG1pZGRsZVggLSB4KSAvIDQwO1xuXHRsZXQgZmluYWxZID0gKG1pZGRsZVkgLSB5KSAvIDQwO1xuXG5cdHBhcmFsbGF4VGV4dHMuZm9yRWFjaCgodGV4dCkgPT4ge1xuXHRcdGlmICh0ZXh0LmNsYXNzTGlzdC5jb250YWlucygncmVzZXQtcG9zJykpIHtcblx0XHRcdHRleHQuY2xhc3NMaXN0LnJlbW92ZSgncmVzZXQtcG9zJyk7XG5cdFx0fVxuXHRcdHRleHQuY2xhc3NMaXN0LmFkZCgnYWRkLXBvcycpO1xuXG5cdFx0dGV4dC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10cmFuc2Zvcm0teScsIGAke2ZpbmFsWX1weGApO1xuXHRcdHRleHQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdHJhbnNmb3JtLXgnLCBgJHtmaW5hbFh9cHhgKTtcblx0fSk7XG59O1xuXG5zZWNvbmRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZVBhcmFsbGF4SXRlbXMpO1xuc2Vjb25kU2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcblx0cGFyYWxsYXhUZXh0cy5mb3JFYWNoKCh0ZXh0KSA9PiB7XG5cdFx0dGV4dC5jbGFzc0xpc3QuYWRkKCdyZXNldC1wb3MnKTtcblx0XHR0ZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2FkZC1wb3MnKTtcblx0fSk7XG59KTtcblxuLy8gZnVuY3Rpb25zIGFjdGlvbnNcblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblx0aGVhZGVyUGFyYWxsYXhIYW5kbGVyKCk7XG5cdGlmICh2aWV3cG9ydFdpZHRoIDw9IDc2OCkge1xuXHRcdG5hdkhhbmRsZXIoKTtcblx0fVxuXHRwcm9qZWN0c1BhcmFsbGF4SGFuZGxlcigpO1xuXHRoYW5kbGVQYXJhbGxheFNlY3Rpb24oKTtcbn07XG5cbnByb2Nlc3NCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlbmdlUHJvY2VzcykpO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRjYXJkT3V0c2lkZUhhbmRsZXIoZSk7XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcblx0aGVhZGVyUGFyYWxsYXhIYW5kbGVyKCk7XG5cdHByb2plY3RzUGFyYWxsYXhIYW5kbGVyKCk7XG5cdGhhbmRsZVBhcmFsbGF4U2VjdGlvbigpO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG5cdHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgaGVhZGVyUGFyYWxsYXhIYW5kbGVyKClcblx0aWYgKHZpZXdwb3J0V2lkdGggPD0gNzY4KSB7XG5cdFx0bmF2SGFuZGxlcigpO1xuXHR9XG5cdGlmICh2aWV3cG9ydFdpZHRoID49IDk5MikgcmV0dXJuO1xuICBwcm9qZWN0c1BhcmFsbGF4SGFuZGxlcigpXG5cdGNhcmRzQWN0aXZhdG9ySGFuZGxlcigpO1xufSk7XG4iXX0=
