"use strict";var introText=document.querySelectorAll(".intro-text"),introBtn=document.querySelector(".intro-btn"),racoon=document.querySelector(".racoon"),intro=document.querySelector(".intro"),nav=document.querySelector(".navbar"),viewportWidth=window.innerWidth,cards=document.querySelectorAll(".services__cards .card"),cardsActivatorHandler=function(){cards.forEach(function(e){e.addEventListener("click",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")}),e.addEventListener("touchend",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")})})},cardOutsideHandler=function(e){e.target.classList.contains("card")||cards.forEach(function(e){e.classList.remove("active")})},navHandler=function(){function a(){r.classList.remove("active"),e.classList.remove("active")}var e=document.querySelector(".navbar"),t=document.querySelector(".burger-icon"),o=document.querySelectorAll(".mobile-nav a"),n=document.querySelector(".nav-list-background"),r=t.cloneNode(!0),t=(r.addEventListener("click",function(){r.classList.toggle("active"),e.classList.toggle("active")}),t.replaceWith(r),o.forEach(function(e){var t=e.cloneNode(!0);t.addEventListener("click",a),e.replaceWith(t)}),n.cloneNode());t.addEventListener("click",a),n.replaceWith(t)},headerParallaxHandler=function(){var e,t,a;viewportWidth<768?document.querySelector(".intro").classList.remove("fixed"):(e=window.scrollY,t=.1*window.scrollY,a=1/(e/100+1),introText[0].style.transform="translate(".concat(14*t,"px)"),introText[1].style.transform="translate(".concat(-3*t,"px)"),introText[2].style.transform="translate(".concat(16*t,"px)"),introText[3].style.transform="translate(".concat(17*t,"px)"),introText[4].style.transform="translate(".concat(-9*t,"px)"),introText[5].style.transform="translate(".concat(17.5*t,"px)"),e>window.innerHeight?(intro.style.pointerEvents="none",intro.style.opacity="0"):(introBtn.style.opacity="".concat(a),racoon.style.opacity="".concat(a),intro.style.pointerEvents="all",intro.style.opacity="1"))},processesInfo=[{heading:"Jak przebiegają rozmowy?",text:"Zaczynamy od określenia świadczonej usługi. Jeżeli jest to budowa lub projektowanie, to pytamy czy istnieje jakieś logo, bądź wizytówka firmy. Następnie zapytamy o treści, które miałyby się znaleźć na stronie. Na podstawie tego tworzymy wyłącznie strukturę i wyceniamy projekt. Następnie zaczynamy projektować.",button:"Konsultacja"},{heading:"Jak wygląda prezentacja projektu?",text:"Po skończeniu projektu strony, przedstawiamy go Tobie do ocenienia. Wtedy przyjmujemy wszelkie uwagi dot. doboru kolorów, budowy sekcji itd. Tłumaczymy też, czemu pewne elementy muszą zawierać niektóre cechy. Później nanosimy wszelkie zmiany.",button:"Prezentacja"},{heading:"Czym jest etap zatwierdzenia?",text:"To krok, w którym decydujesz się na podjęcie lub odrzucenie naszych usług. Jeżeli zlecisz nam stworzenie strony, to przekażemy Ci ile prawdopodobnie zajmie to nam czasu. Dodatkowo będziemy potrzebowali dokładnych treści, które mają się finalnie znaleźć na Twojej witrynie.",button:"Zatwierdzenie"},{heading:"Wykonanie projektu!",text:"Ten krok zostaw nam! Od razu zabierzemy się do tworzenia Twojej wymarzonej wizytówki internetowej. Podczas tego czasu możesz nam przekazać wszelkie dodatkowe informacje, a my weźmiemy je pod uwagę. Po zakończonej pracy zostało tylko umieścić ją na hostingu.",button:"Wykonanie"}],processTitle=document.querySelector(".processes-content-title"),processText=document.querySelector(".processes-content-text"),processBtns=document.querySelectorAll(".processes-list-item"),chengeProcess=function(e){e=e.target;e.classList.contains("active")||(closeAllProcesses(),e.classList.toggle("active"),setContent())},closeAllProcesses=function(){processBtns.forEach(function(e){return e.classList.remove("active")})},setContent=function(){for(var e=0;e<processesInfo.length;e++)if(processBtns[e].classList.contains("active"))return processTitle.textContent=processesInfo[e].heading,void(processText.textContent=processesInfo[e].text)},parallaxSection=document.querySelector(".projects-desktop-cnt"),parallaxItems=document.querySelectorAll(".projects-parallax"),prevSection=document.querySelector(".services"),nextSection=document.querySelector(".processes"),viewport=window.innerWidth,prevSectionOffset=prevSection.offsetTop,projectsParallaxHandler=function(){var e,t,a;viewport<992||(a=document.querySelector(".projects .section__heading"),e=prevSectionOffset+prevSection.offsetHeight+a.offsetHeight+nav.offsetHeight,t=nextSection.offsetTop-nextSection.offsetHeight+a.offsetHeight,document.querySelector(".projects-desktop-cnt").style.height="Calc(600vh + ".concat(a.offsetHeight,"px)"),e<=(a=window.scrollY)&&parallaxSection.classList.add("fixed-pr"),(t<=a||a<e)&&parallaxSection.classList.remove("fixed-pr"),t<=a&&(parallaxItems[0].style.transform="translate(0, 0)",parallaxItems[1].style.transform="translate(0, 4200px)"),parallaxSection.classList.contains("fixed-pr")&&(parallaxItems[0].style.transform="translate(0px, -".concat(a-e,"px)"),parallaxItems[1].style.transform="translate(0px, ".concat(a-e,"px)")),a<e&&(parallaxItems[0].style.transform="translate(0, 0)",parallaxItems[1].style.transform="translate(0, 0)"),!parallaxSection.classList.contains(".fixed-pr")&&t<=a&&(parallaxItems[1].style.transform="translateY(200vh)"))},firstSection=document.querySelector(".processes"),secondSection=document.querySelector(".characteristics"),parallaxHero=document.querySelector(".parallax-hero"),handleParallaxSection=function(){var e,t,a;viewportWidth<992||(a=firstSection.offsetTop,t=nav.offsetHeight,parallaxHero.style.height="".concat(viewportWidth+t-window.innerHeight,"px"),a=window.scrollY-a,console.log(a),viewportWidth<a?(e=!1,firstSection.style.transform="translate(-".concat(viewportWidth,"px, ").concat(viewportWidth,"px)"),secondSection.style.transform="translate(0, ".concat(viewportWidth-window.innerHeight+t,"px)")):a<=0?(e=!1,firstSection.style.transform="translate(0, 0)",secondSection.style.transform="translate(100%, -100%)"):e=!0,e&&(firstSection.style.transform="translate(-".concat(a,"px, ").concat(a,"px)"),secondSection.style.transform="translate(Calc(100% - ".concat(a,"px), Calc(-100% + ").concat(a,"px))")))},parallaxTexts=document.querySelectorAll(".characteristics-item"),handleParallaxItems=function(e){e.target.classList.contains("reset-pos")&&e.target.classList.remove("reset-pos"),e.target.classList.add("add-pos");var t=e.clientX,a=e.clientY,o=e.target.offsetWidth/2,e=e.target.offsetHeight/2,n=(o-t)/40,r=(e-a)/40;parallaxTexts.forEach(function(e){e.classList.contains("reset-pos")&&e.classList.remove("reset-pos"),e.classList.add("add-pos"),e.style.setProperty("--transform-y","".concat(r,"px")),e.style.setProperty("--transform-x","".concat(n,"px"))})};secondSection.addEventListener("mousemove",handleParallaxItems),secondSection.addEventListener("mouseout",function(){parallaxTexts.forEach(function(e){e.classList.add("reset-pos"),e.classList.remove("add-pos")})}),window.onload=function(){headerParallaxHandler(),viewportWidth<=768&&navHandler(),projectsParallaxHandler(),handleParallaxSection()},processBtns.forEach(function(e){return e.addEventListener("click",chengeProcess)}),window.addEventListener("click",function(e){cardOutsideHandler(e)}),window.addEventListener("scroll",function(){headerParallaxHandler(),projectsParallaxHandler(),handleParallaxSection()}),window.addEventListener("resize",function(){(viewportWidth=window.innerWidth)<=768&&navHandler(),992<=viewportWidth||cardsActivatorHandler()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW50cm9UZXh0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW50cm9CdG4iLCJxdWVyeVNlbGVjdG9yIiwicmFjb29uIiwiaW50cm8iLCJ3aW5kb3ciLCJ2aWV3cG9ydFdpZHRoIiwiY2FyZHNBY3RpdmF0b3JIYW5kbGVyIiwiY2FyZHMiLCJmb3JFYWNoIiwiY2FyZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwibW5hdkl0ZW1zIiwiY2xvc2UiLCJidXJnZXJJY29uIiwib2xkQnVyZ2VySWNvbiIsImNsb25lTm9kZSIsIm9sZE5hdkxpc3RCYWNrZ3JvdW5kIiwicmV2ZWFsIiwidG9nZ2xlIiwibmF2YmFyIiwib2xkSXRlbSIsIm5hdkxpc3RCYWNrZ3JvdW5kIiwicmVwbGFjZVdpdGgiLCJpdGVtIiwiaGVhZGVyUGFyYWxsYXhIYW5kbGVyIiwic2Nyb2xsWSIsInJhdGUiLCJzdHlsZSIsInRyYW5zZm9ybSIsIm9mZnNldFkiLCJpbm5lckhlaWdodCIsInBvaW50ZXJFdmVudHMiLCJjb25jYXQiLCJvcGFjaXR5Iiwib3BhY2l0eVZhbHVlIiwicHJvY2Vzc2VzSW5mbyIsImhlYWRpbmciLCJ0ZXh0IiwiYnV0dG9uIiwicHJvY2Vzc0J0bnMiLCJjaGVuZ2VQcm9jZXNzIiwiY2xvc2VBbGxQcm9jZXNzZXMiLCJwcm9jZXNzVGl0bGUiLCJidG4iLCJlIiwidGFyZ2V0Iiwic2V0Q29udGVudCIsInRleHRDb250ZW50IiwicHJvY2Vzc1RleHQiLCJwYXJhbGxheEl0ZW1zIiwicHJldlNlY3Rpb24iLCJpIiwibmV4dFNlY3Rpb24iLCJpbm5lcldpZHRoIiwicHJldlNlY3Rpb25PZmZzZXQiLCJvZmZzZXRUb3AiLCJzY3JvbGxUb3AiLCJmaXJzdEFuY2hvclBvaW50IiwicGFyYWxsYXhTZWN0aW9uIiwidmlld3BvcnQiLCJzZWNvbmRBbmNob3JQb2ludCIsInByb2plY3RzUGFyYWxsYXhIYW5kbGVyIiwic2VjdGlvbkhlYWRpbmciLCJvZmZzZXRIZWlnaHQiLCJuYXYiLCJwYXJhbGxheEhlcm8iLCJoYW5kbGVQYXJhbGxheFNlY3Rpb24iLCJzY3JvbGxQZXJtaXNpb24iLCJzZWN0aW9uT2ZmU2V0IiwiZmlyc3RTZWN0aW9uIiwic2Nyb2xsVmFsdWUiLCJjb25zb2xlIiwic2Vjb25kU2VjdGlvbiIsInBhcmFsbGF4VGV4dHMiLCJoYW5kbGVQYXJhbGxheEl0ZW1zIiwibWlkZGxlWCIsInNldFByb3BlcnR5IiwibmF2SGVpZ2h0IiwiY2FyZE91dHNpZGVIYW5kbGVyIiwieSIsImNsaWVudFkiLCJvZmZzZXRXaWR0aCIsIngiLCJmaW5hbFkiLCJmaW5hbFgiLCJvbmxvYWQiLCJuYXZIYW5kbGVyIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxVQUFZQyxTQUFTQyxpQkFBaUIsYUFBYSxFQUNuREMsU0FBV0YsU0FBU0csY0FBYyxZQUFZLEVBRDlDSixPQUFTQyxTQUFXRyxjQUFDRixTQUFpQixFQUN0Q0MsTUFBUUYsU0FBV0csY0FBYyxRQUFDLEVBQ2xDQyxJQUFNSixTQUFXRyxjQUFjLFNBQUMsRUFDaENFLGNBQWdCQyxPQUFDSCxXQUVuQkksTUFBQUEsU0FBZ0JELGlCQUFpQix3QkFBQSxFQUkvQkUsc0JBQXdCLFdBQzdCQyxNQUFLQyxRQUFRLFNBQUNDLEdBQ2JBLEVBQUFBLGlCQUFLQyxRQUF3QixXQUM1QkgsTUFBQUEsUUFBTUMsU0FBQUEsR0FDTEcsRUFBQUMsVUFBT0EsU0FBVUMsUUFBUyxHQUN6QkYsRUFBR0MsVUFBQUEsT0FBVUUsUUFBTyxDQUV0QixDQUFDLEVBQ0RMLEVBQUFBLFVBQUtHLElBQVVHLFFBQUksQ0FDcEIsQ0FBQyxFQUVETixFQUNDRixpQkFBYyxXQUFRLFdBQXRCQSxNQUNDQyxRQUFPSSxTQUFBQSxHQUFIRCxFQUNIQSxVQUFHQyxTQUFpQixRQUFRLEdBQTVCRCxFQUNEQyxVQUFBRSxPQUFBLFFBQUEsQ0FDRCxDQUFDLEVBQ0RM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QUEsZ0JBQUEsR0FBQTVDLE9BQUFvRCxFQUFBLElBQUEsQ0FBQSxDQXpDRCxDQUFDLENBQ0YsRUFFQVosY0FBY25FLGlCQUFpQixZQUFhcUUsbUJBQW1CLEVBQy9ERixjQUFjbkUsaUJBQWlCLFdBQVksV0FDMUNvRSxjQUFjdEUsUUFBUSxTQUFDa0MsR0FDdEJBLEVBQUs5QixVQUFVRyxJQUFJLFdBQVcsRUFDOUIyQixFQUFLOUIsVUFBVUUsT0FBTyxTQUFTLENBQ2hDLENBQUMsQ0FDRixDQUFDLEVBSURWLE9BQU9zRixPQUFTLFdBQ2Y3RCxzQkFBc0IsRUFDbEJ4QixlQUFpQixLQUNwQnNGLFdBQVcsRUFFWnpCLHdCQUF3QixFQUN4Qkssc0JBQXNCLENBQ3ZCLEVBRUEzQixZQUFZcEMsUUFBUSxTQUFDd0MsR0FBRyxPQUFLQSxFQUFJdEMsaUJBQWlCLFFBQVNtQyxhQUFhLENBQUMsQ0FBQSxFQUV6RXpDLE9BQU9NLGlCQUFpQixRQUFTLFNBQUN1QyxHQUNqQ2tDLG1CQUFtQmxDLENBQUMsQ0FDckIsQ0FBQyxFQUVEN0MsT0FBT00saUJBQWlCLFNBQVUsV0FDakNtQixzQkFBc0IsRUFDdEJxQyx3QkFBd0IsRUFDeEJLLHNCQUFzQixDQUN2QixDQUFDLEVBRURuRSxPQUFPTSxpQkFBaUIsU0FBVSxZQUNqQ0wsY0FBZ0JELE9BQU9zRCxhQUNGLEtBQ3BCaUMsV0FBVyxFQUVTLEtBQWpCdEYsZUFDSkMsc0JBQXNCLENBQ3ZCLENBQUMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpbnRyb1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW50cm8tdGV4dCcpO1xyXG5jb25zdCBpbnRyb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRyby1idG4nKTtcclxuY29uc3QgcmFjb29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJhY29vbicpO1xyXG5jb25zdCBpbnRybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRybycpO1xyXG5jb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJyk7XHJcbmxldCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG5jb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXJ2aWNlc19fY2FyZHMgLmNhcmQnKTtcclxuXHJcbmNvbnN0IGNhcmRzQWN0aXZhdG9ySGFuZGxlciA9ICgpID0+IHtcclxuXHRjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcblx0XHRjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRjYXJkcy5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0XHRcdGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcblx0XHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRjYXJkLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y2FyZC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHtcclxuXHRcdFx0Y2FyZHMuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRcdFx0XHRpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG5cdFx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y2FyZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgY2FyZE91dHNpZGVIYW5kbGVyID0gKGUpID0+IHtcclxuXHRpZiAoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2FyZCcpKSB7XHJcblx0XHRjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcblx0XHRcdGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBuYXZIYW5kbGVyID0gKCkgPT4ge1xyXG5cdGNvbnN0IG5hdmJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXInKTtcclxuXHRjb25zdCBvbGRCdXJnZXJJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1pY29uJyk7XHJcblx0Y29uc3QgbW5hdkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vYmlsZS1uYXYgYScpO1xyXG5cdGNvbnN0IG9sZE5hdkxpc3RCYWNrZ3JvdW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdi1saXN0LWJhY2tncm91bmQnKTtcclxuXHRjb25zdCByZXZlYWwgPSAoKSA9PiB7XHJcblx0XHRidXJnZXJJY29uLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG5cdFx0bmF2YmFyLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG5cdH07XHJcblx0Y29uc3QgY2xvc2UgPSAoKSA9PiB7XHJcblx0XHRidXJnZXJJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0bmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdH07XHJcblx0Y29uc3QgYnVyZ2VySWNvbiA9IG9sZEJ1cmdlckljb24uY2xvbmVOb2RlKHRydWUpO1xyXG5cdGJ1cmdlckljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXZlYWwpO1xyXG5cdG9sZEJ1cmdlckljb24ucmVwbGFjZVdpdGgoYnVyZ2VySWNvbik7XHJcblx0bW5hdkl0ZW1zLmZvckVhY2goKG9sZEl0ZW0pID0+IHtcclxuXHRcdGNvbnN0IGl0ZW0gPSBvbGRJdGVtLmNsb25lTm9kZSh0cnVlKTtcclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7XHJcblx0XHRvbGRJdGVtLnJlcGxhY2VXaXRoKGl0ZW0pO1xyXG5cdH0pO1xyXG5cdGNvbnN0IG5hdkxpc3RCYWNrZ3JvdW5kID0gb2xkTmF2TGlzdEJhY2tncm91bmQuY2xvbmVOb2RlKCk7XHJcblx0bmF2TGlzdEJhY2tncm91bmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7XHJcblx0b2xkTmF2TGlzdEJhY2tncm91bmQucmVwbGFjZVdpdGgobmF2TGlzdEJhY2tncm91bmQpO1xyXG59O1xyXG5cclxuY29uc3QgaGVhZGVyUGFyYWxsYXhIYW5kbGVyID0gKCkgPT4ge1xyXG5cdGlmICh2aWV3cG9ydFdpZHRoIDwgNzY4KSB7XHJcblx0XHRjb25zdCBpbnRybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRybycpO1xyXG5cdFx0aW50cm8uY2xhc3NMaXN0LnJlbW92ZSgnZml4ZWQnKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGNvbnN0IG9mZnNldFkgPSB3aW5kb3cuc2Nyb2xsWTtcclxuXHRjb25zdCByYXRlID0gd2luZG93LnNjcm9sbFkgKiAwLjE7XHJcblx0Y29uc3Qgb3BhY2l0eVZhbHVlID0gMSAvIChvZmZzZXRZIC8gMTAwICsgMSk7XHJcblxyXG5cdGludHJvVGV4dFswXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cmF0ZSAqIDE0fXB4KWA7XHJcblx0aW50cm9UZXh0WzFdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogLTN9cHgpYDtcclxuXHRpbnRyb1RleHRbMl0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3JhdGUgKiAxNn1weClgO1xyXG5cdGludHJvVGV4dFszXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cmF0ZSAqIDE3fXB4KWA7XHJcblx0aW50cm9UZXh0WzRdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogLTl9cHgpYDtcclxuXHRpbnRyb1RleHRbNV0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3JhdGUgKiAxNy41fXB4KWA7XHJcblxyXG5cdGlmIChvZmZzZXRZID4gd2luZG93LmlubmVySGVpZ2h0KSB7XHJcblx0XHRpbnRyby5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG5cdFx0aW50cm8uc3R5bGUub3BhY2l0eSA9ICcwJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0aW50cm9CdG4uc3R5bGUub3BhY2l0eSA9IGAke29wYWNpdHlWYWx1ZX1gO1xyXG5cdFx0cmFjb29uLnN0eWxlLm9wYWNpdHkgPSBgJHtvcGFjaXR5VmFsdWV9YDtcclxuXHRcdGludHJvLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYWxsJztcclxuXHRcdGludHJvLnN0eWxlLm9wYWNpdHkgPSAnMSc7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gUHJvY2Vzc2VzIC0gbGlzdFxyXG5jb25zdCBwcm9jZXNzZXNJbmZvID0gW1xyXG5cdHtcclxuXHRcdGhlYWRpbmc6ICdKYWsgcHJ6ZWJpZWdhasSFIHJvem1vd3k/JyxcclxuXHRcdHRleHQ6ICdaYWN6eW5hbXkgb2Qgb2tyZcWbbGVuaWEgxZt3aWFkY3pvbmVqIHVzxYJ1Z2kuIEplxbxlbGkgamVzdCB0byBidWRvd2EgbHViIHByb2pla3Rvd2FuaWUsIHRvIHB5dGFteSBjenkgaXN0bmllamUgamFraWXFmyBsb2dvLCBixIVkxbogd2l6eXTDs3drYSBmaXJteS4gTmFzdMSZcG5pZSB6YXB5dGFteSBvIHRyZcWbY2ksIGt0w7NyZSBtaWHFgnlieSBzacSZIHpuYWxlxbrEhyBuYSBzdHJvbmllLiBOYSBwb2RzdGF3aWUgdGVnbyB0d29yenlteSB3ecWCxIVjem5pZSBzdHJ1a3R1csSZIGkgd3ljZW5pYW15IHByb2pla3QuIE5hc3TEmXBuaWUgemFjenluYW15IHByb2pla3Rvd2HEhy4nLFxyXG5cdFx0YnV0dG9uOiAnS29uc3VsdGFjamEnLFxyXG5cdH0sXHJcblx0e1xyXG5cdFx0aGVhZGluZzogJ0phayB3eWdsxIVkYSBwcmV6ZW50YWNqYSBwcm9qZWt0dT8nLFxyXG5cdFx0dGV4dDogJ1BvIHNrb8WEY3plbml1IHByb2pla3R1IHN0cm9ueSwgcHJ6ZWRzdGF3aWFteSBnbyBUb2JpZSBkbyBvY2VuaWVuaWEuIFd0ZWR5IHByenlqbXVqZW15IHdzemVsa2llIHV3YWdpIGRvdC4gZG9ib3J1IGtvbG9yw7N3LCBidWRvd3kgc2VrY2ppIGl0ZC4gVMWCdW1hY3p5bXkgdGXFvCwgY3plbXUgcGV3bmUgZWxlbWVudHkgbXVzesSFIHphd2llcmHEhyBuaWVrdMOzcmUgY2VjaHkuIFDDs8W6bmllaiBuYW5vc2lteSB3c3plbGtpZSB6bWlhbnkuJyxcclxuXHRcdGJ1dHRvbjogJ1ByZXplbnRhY2phJyxcclxuXHR9LFxyXG5cdHtcclxuXHRcdGhlYWRpbmc6ICdDenltIGplc3QgZXRhcCB6YXR3aWVyZHplbmlhPycsXHJcblx0XHR0ZXh0OiAnVG8ga3JvaywgdyBrdMOzcnltIGRlY3lkdWplc3ogc2nEmSBuYSBwb2RqxJljaWUgbHViIG9kcnp1Y2VuaWUgbmFzenljaCB1c8WCdWcuIEplxbxlbGkgemxlY2lzeiBuYW0gc3R3b3J6ZW5pZSBzdHJvbnksIHRvIHByemVrYcW8ZW15IENpIGlsZSBwcmF3ZG9wb2RvYm5pZSB6YWptaWUgdG8gbmFtIGN6YXN1LiBEb2RhdGtvd28gYsSZZHppZW15IHBvdHJ6ZWJvd2FsaSBkb2vFgmFkbnljaCB0cmXFm2NpLCBrdMOzcmUgbWFqxIUgc2nEmSBmaW5hbG5pZSB6bmFsZcW6xIcgbmEgVHdvamVqIHdpdHJ5bmllLicsXHJcblx0XHRidXR0b246ICdaYXR3aWVyZHplbmllJyxcclxuXHR9LFxyXG5cdHtcclxuXHRcdGhlYWRpbmc6ICdXeWtvbmFuaWUgcHJvamVrdHUhJyxcclxuXHRcdHRleHQ6ICdUZW4ga3JvayB6b3N0YXcgbmFtISBPZCByYXp1IHphYmllcnplbXkgc2nEmSBkbyB0d29yemVuaWEgVHdvamVqIHd5bWFyem9uZWogd2l6eXTDs3draSBpbnRlcm5ldG93ZWouIFBvZGN6YXMgdGVnbyBjemFzdSBtb8W8ZXN6IG5hbSBwcnpla2F6YcSHIHdzemVsa2llIGRvZGF0a293ZSBpbmZvcm1hY2plLCBhIG15IHdlxbptaWVteSBqZSBwb2QgdXdhZ8SZLiBQbyB6YWtvxYRjem9uZWogcHJhY3kgem9zdGHFgm8gdHlsa28gdW1pZcWbY2nEhyBqxIUgbmEgaG9zdGluZ3UuJyxcclxuXHRcdGJ1dHRvbjogJ1d5a29uYW5pZScsXHJcblx0fSxcclxuXTtcclxuY29uc3QgcHJvY2Vzc1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2Nlc3Nlcy1jb250ZW50LXRpdGxlJyk7XHJcbmNvbnN0IHByb2Nlc3NUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2Nlc3Nlcy1jb250ZW50LXRleHQnKTtcclxuY29uc3QgcHJvY2Vzc0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvY2Vzc2VzLWxpc3QtaXRlbScpO1xyXG5jb25zdCBjaGVuZ2VQcm9jZXNzID0gKGUpID0+IHtcclxuXHRjb25zdCBidG4gPSBlLnRhcmdldDtcclxuXHJcblx0aWYgKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fSBlbHNlIHtcclxuXHRcdGNsb3NlQWxsUHJvY2Vzc2VzKCk7XHJcblx0XHRidG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcblx0fVxyXG5cdHNldENvbnRlbnQoKTtcclxufTtcclxuXHJcbmNvbnN0IGNsb3NlQWxsUHJvY2Vzc2VzID0gKCkgPT4ge1xyXG5cdHByb2Nlc3NCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcclxufTtcclxuXHJcbmNvbnN0IHNldENvbnRlbnQgPSAoKSA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwcm9jZXNzZXNJbmZvLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpZiAocHJvY2Vzc0J0bnNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG5cdFx0XHRwcm9jZXNzVGl0bGUudGV4dENvbnRlbnQgPSBwcm9jZXNzZXNJbmZvW2ldLmhlYWRpbmc7XHJcblx0XHRcdHByb2Nlc3NUZXh0LnRleHRDb250ZW50ID0gcHJvY2Vzc2VzSW5mb1tpXS50ZXh0O1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuLyogUFJPSkVDVFMgUEFSQUxMQVggKi9cclxuXHJcbmNvbnN0IHBhcmFsbGF4U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1kZXNrdG9wLWNudCcpO1xyXG5jb25zdCBwYXJhbGxheEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3RzLXBhcmFsbGF4Jyk7XHJcbmNvbnN0IHByZXZTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2VzJyk7XHJcbmNvbnN0IG5leHRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2Nlc3NlcycpO1xyXG5sZXQgdmlld3BvcnQgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxubGV0IHByZXZTZWN0aW9uT2Zmc2V0ID0gcHJldlNlY3Rpb24ub2Zmc2V0VG9wO1xyXG5cclxuY29uc3QgcHJvamVjdHNQYXJhbGxheEhhbmRsZXIgPSAoKSA9PiB7XHJcblx0aWYgKHZpZXdwb3J0IDwgOTkyKSByZXR1cm47XHJcblx0Y29uc3Qgc2VjdGlvbkhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMgLnNlY3Rpb25fX2hlYWRpbmcnKTtcclxuXHRsZXQgZmlyc3RBbmNob3JQb2ludCA9XHJcblx0XHRwcmV2U2VjdGlvbk9mZnNldCArXHJcblx0XHRwcmV2U2VjdGlvbi5vZmZzZXRIZWlnaHQgK1xyXG5cdFx0c2VjdGlvbkhlYWRpbmcub2Zmc2V0SGVpZ2h0ICtcclxuXHRcdG5hdi5vZmZzZXRIZWlnaHQ7XHJcblx0bGV0IHNlY29uZEFuY2hvclBvaW50ID1cclxuXHRcdG5leHRTZWN0aW9uLm9mZnNldFRvcCAtXHJcblx0XHRuZXh0U2VjdGlvbi5vZmZzZXRIZWlnaHQgK1xyXG5cdFx0c2VjdGlvbkhlYWRpbmcub2Zmc2V0SGVpZ2h0O1xyXG5cdGNvbnN0IHByb2plY3RzRGVza3RvcENudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1kZXNrdG9wLWNudCcpO1xyXG5cdHByb2plY3RzRGVza3RvcENudC5zdHlsZS5oZWlnaHQgPSBgQ2FsYyg2MDB2aCArICR7c2VjdGlvbkhlYWRpbmcub2Zmc2V0SGVpZ2h0fXB4KWA7XHJcblxyXG5cdGxldCBzY3JvbGxUb3AgPSB3aW5kb3cuc2Nyb2xsWTtcclxuXHQvLyBsZXQgc2Nyb2xsVG9BbmNob3IgPSBuZXh0U2VjdGlvbi5vZmZzZXRIZWlnaHQgKyBuZXh0U2VjdGlvbi5vZmZzZXRUb3BcclxuXHRpZiAoc2Nyb2xsVG9wID49IGZpcnN0QW5jaG9yUG9pbnQpIHtcclxuXHRcdHBhcmFsbGF4U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdmaXhlZC1wcicpO1xyXG5cdH1cclxuXHRpZiAoc2Nyb2xsVG9wID49IHNlY29uZEFuY2hvclBvaW50IHx8IHNjcm9sbFRvcCA8IGZpcnN0QW5jaG9yUG9pbnQpIHtcclxuXHRcdHBhcmFsbGF4U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZC1wcicpO1xyXG5cdH1cclxuXHRpZiAoc2Nyb2xsVG9wID49IHNlY29uZEFuY2hvclBvaW50KSB7XHJcblx0XHRwYXJhbGxheEl0ZW1zWzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgMClgO1xyXG5cdFx0cGFyYWxsYXhJdGVtc1sxXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsIDQyMDBweClgO1xyXG5cdH1cclxuXHJcblx0aWYgKHBhcmFsbGF4U2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpeGVkLXByJykpIHtcclxuXHRcdHBhcmFsbGF4SXRlbXNbMF0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgwcHgsIC0ke1xyXG5cdFx0XHRzY3JvbGxUb3AgLSBmaXJzdEFuY2hvclBvaW50XHJcblx0XHR9cHgpYDtcclxuXHRcdHBhcmFsbGF4SXRlbXNbMV0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgwcHgsICR7XHJcblx0XHRcdHNjcm9sbFRvcCAtIGZpcnN0QW5jaG9yUG9pbnRcclxuXHRcdH1weClgO1xyXG5cdH1cclxuXHRpZiAoc2Nyb2xsVG9wIDwgZmlyc3RBbmNob3JQb2ludCkge1xyXG5cdFx0cGFyYWxsYXhJdGVtc1swXS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDAsIDApJztcclxuXHRcdHBhcmFsbGF4SXRlbXNbMV0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKSc7XHJcblx0fVxyXG5cdGlmIChcclxuXHRcdCFwYXJhbGxheFNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCcuZml4ZWQtcHInKSAmJlxyXG5cdFx0c2Nyb2xsVG9wID49IHNlY29uZEFuY2hvclBvaW50XHJcblx0KSB7XHJcblx0XHQvL28gaWxvxZvEhyBzZWtjamkgKiAyMDB2aFxyXG5cdFx0cGFyYWxsYXhJdGVtc1sxXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgyMDB2aClgO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGZpcnN0U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMnKTtcclxuY29uc3Qgc2Vjb25kU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXJpc3RpY3MnKTtcclxuY29uc3QgcGFyYWxsYXhIZXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhcmFsbGF4LWhlcm8nKTtcclxuXHJcbmNvbnN0IGhhbmRsZVBhcmFsbGF4U2VjdGlvbiA9ICgpID0+IHtcclxuXHRpZiAodmlld3BvcnRXaWR0aCA8IDk5MikgcmV0dXJuO1xyXG5cdGxldCBzY3JvbGxQZXJtaXNpb247XHJcblx0Y29uc3Qgc2VjdGlvbk9mZlNldCA9IGZpcnN0U2VjdGlvbi5vZmZzZXRUb3A7XHJcblx0Y29uc3QgbmF2SGVpZ2h0ID0gbmF2Lm9mZnNldEhlaWdodDtcclxuXHRwYXJhbGxheEhlcm8uc3R5bGUuaGVpZ2h0ID0gYCR7XHJcblx0XHR2aWV3cG9ydFdpZHRoICsgbmF2SGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0XHJcblx0fXB4YDtcclxuXHRjb25zdCBzY3JvbGxWYWx1ZSA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cdGNvbnN0IHJhdGUgPSBzY3JvbGxWYWx1ZSAtIHNlY3Rpb25PZmZTZXQ7XHJcblx0Y29uc29sZS5sb2cocmF0ZSk7XHJcblx0aWYgKHJhdGUgPiB2aWV3cG9ydFdpZHRoKSB7XHJcblx0XHRzY3JvbGxQZXJtaXNpb24gPSBmYWxzZTtcclxuXHRcdGZpcnN0U2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC0ke3ZpZXdwb3J0V2lkdGh9cHgsICR7dmlld3BvcnRXaWR0aH1weClgO1xyXG5cdFx0c2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsICR7XHJcblx0XHRcdHZpZXdwb3J0V2lkdGggLSB3aW5kb3cuaW5uZXJIZWlnaHQgKyBuYXZIZWlnaHRcclxuXHRcdH1weClgO1xyXG5cdH0gZWxzZSBpZiAocmF0ZSA8PSAwKSB7XHJcblx0XHRzY3JvbGxQZXJtaXNpb24gPSBmYWxzZTtcclxuXHRcdGZpcnN0U2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsIDApYDtcclxuXHRcdHNlY29uZFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgxMDAlLCAtMTAwJSlgO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzY3JvbGxQZXJtaXNpb24gPSB0cnVlO1xyXG5cdH1cclxuXHRpZiAoc2Nyb2xsUGVybWlzaW9uKSB7XHJcblx0XHRmaXJzdFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgtJHtyYXRlfXB4LCAke3JhdGV9cHgpYDtcclxuXHRcdHNlY29uZFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZShDYWxjKDEwMCUgLSAke3JhdGV9cHgpLCBDYWxjKC0xMDAlICsgJHtyYXRlfXB4KSlgO1xyXG5cdH1cclxufTtcclxuXHJcbi8vIHBhcmFsbGF4IEl0ZW1zXHJcblxyXG5jb25zdCBwYXJhbGxheFRleHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXJhY3RlcmlzdGljcy1pdGVtJyk7XHJcbmNvbnN0IGhhbmRsZVBhcmFsbGF4SXRlbXMgPSAoZSkgPT4ge1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0LXBvcycpKSB7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdyZXNldC1wb3MnKTtcclxuXHR9XHJcblx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWRkLXBvcycpO1xyXG5cclxuXHRsZXQgeCA9IGUuY2xpZW50WDtcclxuXHRsZXQgeSA9IGUuY2xpZW50WTtcclxuXHRjb25zdCBtaWRkbGVYID0gZS50YXJnZXQub2Zmc2V0V2lkdGggLyAyO1xyXG5cdGNvbnN0IG1pZGRsZVkgPSBlLnRhcmdldC5vZmZzZXRIZWlnaHQgLyAyO1xyXG5cdGxldCBmaW5hbFggPSAobWlkZGxlWCAtIHgpIC8gNDA7XHJcblx0bGV0IGZpbmFsWSA9IChtaWRkbGVZIC0geSkgLyA0MDtcclxuXHJcblx0cGFyYWxsYXhUZXh0cy5mb3JFYWNoKCh0ZXh0KSA9PiB7XHJcblx0XHRpZiAodGV4dC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0LXBvcycpKSB7XHJcblx0XHRcdHRleHQuY2xhc3NMaXN0LnJlbW92ZSgncmVzZXQtcG9zJyk7XHJcblx0XHR9XHJcblx0XHR0ZXh0LmNsYXNzTGlzdC5hZGQoJ2FkZC1wb3MnKTtcclxuXHJcblx0XHR0ZXh0LnN0eWxlLnNldFByb3BlcnR5KCctLXRyYW5zZm9ybS15JywgYCR7ZmluYWxZfXB4YCk7XHJcblx0XHR0ZXh0LnN0eWxlLnNldFByb3BlcnR5KCctLXRyYW5zZm9ybS14JywgYCR7ZmluYWxYfXB4YCk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5zZWNvbmRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZVBhcmFsbGF4SXRlbXMpO1xyXG5zZWNvbmRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xyXG5cdHBhcmFsbGF4VGV4dHMuZm9yRWFjaCgodGV4dCkgPT4ge1xyXG5cdFx0dGV4dC5jbGFzc0xpc3QuYWRkKCdyZXNldC1wb3MnKTtcclxuXHRcdHRleHQuY2xhc3NMaXN0LnJlbW92ZSgnYWRkLXBvcycpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbi8vIGZ1bmN0aW9ucyBhY3Rpb25zXHJcblxyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG5cdGhlYWRlclBhcmFsbGF4SGFuZGxlcigpO1xyXG5cdGlmICh2aWV3cG9ydFdpZHRoIDw9IDc2OCkge1xyXG5cdFx0bmF2SGFuZGxlcigpO1xyXG5cdH1cclxuXHRwcm9qZWN0c1BhcmFsbGF4SGFuZGxlcigpO1xyXG5cdGhhbmRsZVBhcmFsbGF4U2VjdGlvbigpO1xyXG59O1xyXG5cclxucHJvY2Vzc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVuZ2VQcm9jZXNzKSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdGNhcmRPdXRzaWRlSGFuZGxlcihlKTtcclxufSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG5cdGhlYWRlclBhcmFsbGF4SGFuZGxlcigpO1xyXG5cdHByb2plY3RzUGFyYWxsYXhIYW5kbGVyKCk7XHJcblx0aGFuZGxlUGFyYWxsYXhTZWN0aW9uKCk7XHJcbn0pO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuXHR2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcblx0aWYgKHZpZXdwb3J0V2lkdGggPD0gNzY4KSB7XHJcblx0XHRuYXZIYW5kbGVyKCk7XHJcblx0fVxyXG5cdGlmICh2aWV3cG9ydFdpZHRoID49IDk5MikgcmV0dXJuO1xyXG5cdGNhcmRzQWN0aXZhdG9ySGFuZGxlcigpO1xyXG59KTtcclxuIl19
